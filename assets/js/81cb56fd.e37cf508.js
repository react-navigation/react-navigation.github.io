"use strict";(self.webpackChunkreact_navigation_website_next=self.webpackChunkreact_navigation_website_next||[]).push([[16522],{35322:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>g,frontMatter:()=>c,metadata:()=>a,toc:()=>u});const a=JSON.parse('{"id":"testing","title":"Writing tests","description":"React Navigation components can be tested in a similar way to other React components. This guide will cover how to write tests for components using React Navigation using Jest.","source":"@site/versioned_docs/version-7.x/testing.md","sourceDirName":".","slug":"/testing","permalink":"/docs/testing","draft":false,"unlisted":false,"editUrl":"https://github.com/react-navigation/react-navigation.github.io/edit/main/versioned_docs/version-7.x/testing.md","tags":[],"version":"7.x","frontMatter":{"id":"testing","title":"Writing tests","sidebar_label":"Writing tests"},"sidebar":"docs","previous":{"title":"Static and dynamic APIs","permalink":"/docs/combine-static-with-dynamic"},"next":{"title":"Configuring TypeScript","permalink":"/docs/typescript"}}');var i=n(74848),s=n(28453),r=n(11470),o=n(19365);const c={id:"testing",title:"Writing tests",sidebar_label:"Writing tests"},l=void 0,d={},u=[{value:"Guiding principles",id:"guiding-principles",level:2},{value:"Setting up Jest",id:"setting-up-jest",level:2},{value:"Compiling React Navigation",id:"compiling-react-navigation",level:3},{value:"Mocking native dependencies",id:"mocking-native-dependencies",level:3},{value:"Fake timers",id:"fake-timers",level:2},{value:"Navigation and visibility",id:"navigation-and-visibility",level:2},{value:"Example tests",id:"example-tests",level:2},{value:"Navigation between tabs",id:"navigation-between-tabs",level:3},{value:"Reacting to a navigation event",id:"reacting-to-a-navigation-event",level:3},{value:"Fetching data with <code>useFocusEffect</code>",id:"fetching-data-with-usefocuseffect",level:3},{value:"Re-usable components",id:"re-usable-components",level:3},{value:"Best practices",id:"best-practices",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(t.p,{children:["React Navigation components can be tested in a similar way to other React components. This guide will cover how to write tests for components using React Navigation using ",(0,i.jsx)(t.a,{href:"https://jestjs.io",children:"Jest"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"guiding-principles",children:"Guiding principles"}),"\n",(0,i.jsx)(t.p,{children:"When writing tests, it's encouraged to write tests that closely resemble how users interact with your app. Keeping this in mind, here are some guiding principles to follow:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Test the result, not the action"}),": Instead of checking if a specific navigation action was called, check if the expected components are rendered after navigation."]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.strong,{children:"Avoid mocking React Navigation"}),": Mocking React Navigation components can lead to tests that don't match the actual logic. Instead, use a real navigator in your tests."]}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Following these principles will help you write tests that are more reliable and easier to maintain by avoiding testing implementation details."}),"\n",(0,i.jsx)(t.h2,{id:"setting-up-jest",children:"Setting up Jest"}),"\n",(0,i.jsx)(t.h3,{id:"compiling-react-navigation",children:"Compiling React Navigation"}),"\n",(0,i.jsxs)(t.p,{children:["React Navigation ships ",(0,i.jsx)(t.a,{href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules",children:"ES modules"}),". However, Jest does not support ES modules natively."]}),"\n",(0,i.jsxs)(t.p,{children:["It's necessary to transform the code to CommonJS to use them in tests. The ",(0,i.jsx)(t.code,{children:"react-native"})," preset for Jest does not transform the code in ",(0,i.jsx)(t.code,{children:"node_modules"})," by default. To enable this, you need to add the ",(0,i.jsx)(t.a,{href:"https://jestjs.io/docs/configuration#transformignorepatterns-arraystring",children:(0,i.jsx)(t.code,{children:"transformIgnorePatterns"})})," option in your Jest configuration where you can specify a regexp pattern. To compile React Navigation packages, you can add ",(0,i.jsx)(t.code,{children:"@react-navigation"})," to the regexp."]}),"\n",(0,i.jsxs)(t.p,{children:["This is usually done in a ",(0,i.jsx)(t.code,{children:"jest.config.js"})," file or the ",(0,i.jsx)(t.code,{children:"jest"})," key in ",(0,i.jsx)(t.code,{children:"package.json"}),":"]}),"\n",(0,i.jsx)(t.pre,{"data-lang":"json",children:(0,i.jsx)(t.code,{className:"language-diff",metastring:"lang=json",children:'{\n  "preset": "react-native",\n+   "transformIgnorePatterns": [\n+     "node_modules/(?!(@react-native|react-native|@react-navigation)/)"\n+   ]\n}\n'})}),"\n",(0,i.jsx)(t.h3,{id:"mocking-native-dependencies",children:"Mocking native dependencies"}),"\n",(0,i.jsx)(t.p,{children:"To be able to test React Navigation components, certain dependencies will need to be mocked depending on which components are being used."}),"\n",(0,i.jsxs)(t.p,{children:["If you're using ",(0,i.jsx)(t.code,{children:"@react-navigation/stack"}),", you will need to mock:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"react-native-gesture-handler"})}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["If you're using ",(0,i.jsx)(t.code,{children:"@react-navigation/drawer"}),", you will need to mock:"]}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"react-native-reanimated"})}),"\n",(0,i.jsx)(t.li,{children:(0,i.jsx)(t.code,{children:"react-native-gesture-handler"})}),"\n"]}),"\n",(0,i.jsxs)(t.p,{children:["To add the mocks, create a file ",(0,i.jsx)(t.code,{children:"jest/setup.js"})," (or any other file name of your choice) and paste the following code in it:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"// Include this line for mocking react-native-gesture-handler\nimport 'react-native-gesture-handler/jestSetup';\n\n// Include this section for mocking react-native-reanimated\nimport { setUpTests } from 'react-native-reanimated';\n\nsetUpTests();\n\n// Silence the warning: Animated: `useNativeDriver` is not supported because the native animated module is missing\nimport { jest } from '@jest/globals';\n\njest.mock('react-native/Libraries/Animated/NativeAnimatedHelper');\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Then we need to use this setup file in our jest config. You can add it under ",(0,i.jsx)(t.a,{href:"https://jestjs.io/docs/configuration#setupfilesafterenv-array",children:(0,i.jsx)(t.code,{children:"setupFilesAfterEnv"})})," option in a ",(0,i.jsx)(t.code,{children:"jest.config.js"})," file or the ",(0,i.jsx)(t.code,{children:"jest"})," key in ",(0,i.jsx)(t.code,{children:"package.json"}),":"]}),"\n",(0,i.jsx)(t.pre,{"data-lang":"json",children:(0,i.jsx)(t.code,{className:"language-diff",metastring:"lang=json",children:'{\n  "preset": "react-native",\n  "transformIgnorePatterns": [\n    "node_modules/(?!(@react-native|react-native|@react-navigation)/)"\n  ],\n+   "setupFilesAfterEnv": ["<rootDir>/jest/setup.js"]\n}\n'})}),"\n",(0,i.jsxs)(t.p,{children:["Jest will run the files specified in ",(0,i.jsx)(t.code,{children:"setupFilesAfterEnv"})," before running your tests, so it's a good place to put your global mocks."]}),"\n",(0,i.jsxs)(n,{children:[(0,i.jsxs)("summary",{children:["Mocking ",(0,i.jsx)(t.code,{children:"react-native-screens"})]}),(0,i.jsxs)(t.p,{children:["This shouldn't be necessary in most cases. However, if you find yourself in a need to mock ",(0,i.jsx)(t.code,{children:"react-native-screens"})," component for some reason, you should do it by adding following code in ",(0,i.jsx)(t.code,{children:"jest/setup.js"})," file:"]}),(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"// Include this section for mocking react-native-screens\njest.mock('react-native-screens', () => {\n  // Require actual module instead of a mock\n  let screens = jest.requireActual('react-native-screens');\n\n  // All exports in react-native-screens are getters\n  // We cannot use spread for cloning as it will call the getters\n  // So we need to clone it with Object.create\n  screens = Object.create(\n    Object.getPrototypeOf(screens),\n    Object.getOwnPropertyDescriptors(screens)\n  );\n\n  // Add mock of the component you need\n  // Here is the example of mocking the Screen component as a View\n  Object.defineProperty(screens, 'Screen', {\n    value: require('react-native').View,\n  });\n\n  return screens;\n});\n"})})]}),"\n",(0,i.jsx)(t.p,{children:"If you're not using Jest, then you'll need to mock these modules according to the test framework you are using."}),"\n",(0,i.jsx)(t.h2,{id:"fake-timers",children:"Fake timers"}),"\n",(0,i.jsxs)(t.p,{children:["When writing tests containing navigation with animations, you need to wait until the animations finish. In such cases, we recommend using ",(0,i.jsx)(t.a,{href:"https://jestjs.io/docs/timer-mocks",children:(0,i.jsx)(t.code,{children:"Fake Timers"})})," to simulate the passage of time in your tests. This can be done by adding the following line at the beginning of your test file:"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"jest.useFakeTimers();\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Fake timers replace real implementation of the native timer functions (e.g. ",(0,i.jsx)(t.code,{children:"setTimeout()"}),", ",(0,i.jsx)(t.code,{children:"setInterval()"})," etc,) with a custom implementation that uses a fake clock. This lets you instantly skip animations and reduce the time needed to run your tests by calling methods such as ",(0,i.jsx)(t.code,{children:"jest.runAllTimers()"}),"."]}),"\n",(0,i.jsxs)(t.p,{children:["Often, component state is updated after an animation completes. To avoid getting an error in such cases, wrap ",(0,i.jsx)(t.code,{children:"jest.runAllTimers()"})," in ",(0,i.jsx)(t.code,{children:"act"}),":"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"import { act } from 'react-test-renderer';\n\n// ...\n\nact(() => jest.runAllTimers());\n"})}),"\n",(0,i.jsx)(t.p,{children:"See the examples below for more details on how to use fake timers in tests involving navigation."}),"\n",(0,i.jsx)(t.h2,{id:"navigation-and-visibility",children:"Navigation and visibility"}),"\n",(0,i.jsx)(t.p,{children:"In React Navigation, the previous screen is not unmounted when navigating to a new screen. This means that the previous screen is still present in the component tree, but it's not visible."}),"\n",(0,i.jsxs)(t.p,{children:["When writing tests, you should assert that the expected component is visible or hidden instead of checking if it's rendered or not. React Native Testing Library provides a ",(0,i.jsx)(t.code,{children:"toBeVisible"})," matcher that can be used to check if an element is visible to the user."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"expect(screen.getByText('Settings screen')).toBeVisible();\n"})}),"\n",(0,i.jsxs)(t.p,{children:["This is in contrast to the ",(0,i.jsx)(t.code,{children:"toBeOnTheScreen"})," matcher, which checks if the element is rendered in the component tree. This matcher is not recommended when writing tests involving navigation."]}),"\n",(0,i.jsxs)(t.p,{children:["By default, the queries from React Native Testing Library (e.g. ",(0,i.jsx)(t.code,{children:"getByRole"}),", ",(0,i.jsx)(t.code,{children:"getByText"}),", ",(0,i.jsx)(t.code,{children:"getByLabelText"})," etc.) ",(0,i.jsx)(t.a,{href:"https://callstack.github.io/react-native-testing-library/docs/api/queries#includehiddenelements-option",children:"only return visible elements"}),". So you don't need to do anything special. However, if you're using a different library for your tests, you'll need to account for this behavior."]}),"\n",(0,i.jsx)(t.h2,{id:"example-tests",children:"Example tests"}),"\n",(0,i.jsxs)(t.p,{children:["We recommend using ",(0,i.jsx)(t.a,{href:"https://callstack.github.io/react-native-testing-library/",children:"React Native Testing Library"})," to write your tests."]}),"\n",(0,i.jsx)(t.p,{children:"In this guide, we will go through some example scenarios and show you how to write tests for them using Jest and React Native Testing Library:"}),"\n",(0,i.jsx)(t.h3,{id:"navigation-between-tabs",children:"Navigation between tabs"}),"\n",(0,i.jsx)(t.p,{children:"In this example, we have a bottom tab navigator with two tabs: Home and Settings. We will write a test that asserts that we can navigate between these tabs by pressing the tab bar buttons."}),"\n",(0,i.jsxs)(r.A,{groupId:"example",queryString:"example",children:[(0,i.jsx)(o.A,{value:"static",label:"Static",default:!0,children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyTabs.js"',children:"import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { Text, View } from 'react-native';\n\nconst HomeScreen = () => {\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Text>Home screen</Text>\n    </View>\n  );\n};\n\nconst SettingsScreen = () => {\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Text>Settings screen</Text>\n    </View>\n  );\n};\n\nexport const MyTabs = createBottomTabNavigator({\n  screens: {\n    Home: HomeScreen,\n    Settings: SettingsScreen,\n  },\n});\n"})})}),(0,i.jsx)(o.A,{value:"dynamic",label:"Dynamic",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyTabs.js"',children:"import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { Text, View } from 'react-native';\n\nconst HomeScreen = () => {\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Text>Home screen</Text>\n    </View>\n  );\n};\n\nconst SettingsScreen = () => {\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Text>Settings screen</Text>\n    </View>\n  );\n};\n\nconst Tab = createBottomTabNavigator();\n\nexport const MyTabs = () => {\n  return (\n    <Tab.Navigator>\n      <Tab.Screen name=\"Home\" component={HomeScreen} />\n      <Tab.Screen name=\"Settings\" component={SettingsScreen} />\n    </Tab.Navigator>\n  );\n};\n"})})})]}),"\n",(0,i.jsxs)(r.A,{groupId:"example",queryString:"example",children:[(0,i.jsx)(o.A,{value:"static",label:"Static",default:!0,children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyTabs.test.js"',children:"import { expect, jest, test } from '@jest/globals';\nimport { createStaticNavigation } from '@react-navigation/native';\nimport { act, render, screen, userEvent } from '@testing-library/react-native';\n\nimport { MyTabs } from './MyTabs';\n\njest.useFakeTimers();\n\ntest('navigates to settings by tab bar button press', async () => {\n  const user = userEvent.setup();\n\n  const Navigation = createStaticNavigation(MyTabs);\n\n  render(<Navigation />);\n\n  const button = screen.getByRole('button', { name: 'Settings, tab, 2 of 2' });\n\n  await user.press(button);\n\n  act(() => jest.runAllTimers());\n\n  expect(screen.getByText('Settings screen')).toBeVisible();\n});\n"})})}),(0,i.jsx)(o.A,{value:"dynamic",label:"Dynamic",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyTabs.test.js"',children:"import { expect, jest, test } from '@jest/globals';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { act, render, screen, userEvent } from '@testing-library/react-native';\n\nimport { MyTabs } from './MyTabs';\n\njest.useFakeTimers();\n\ntest('navigates to settings by tab bar button press', async () => {\n  const user = userEvent.setup();\n\n  render(\n    <NavigationContainer>\n      <MyTabs />\n    </NavigationContainer>\n  );\n\n  const button = screen.getByLabelText('Settings, tab, 2 of 2');\n\n  await user.press(button);\n\n  act(() => jest.runAllTimers());\n\n  expect(screen.getByText('Settings screen')).toBeVisible();\n});\n"})})})]}),"\n",(0,i.jsx)(t.p,{children:"In the above test, we:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Render the ",(0,i.jsx)(t.code,{children:"MyTabs"})," navigator within a ",(0,i.jsx)(t.a,{href:"/docs/navigation-container",children:"NavigationContainer"})," in our test."]}),"\n",(0,i.jsxs)(t.li,{children:["Get the tab bar button using the ",(0,i.jsx)(t.code,{children:"getByLabelText"})," query that matches its accessibility label."]}),"\n",(0,i.jsxs)(t.li,{children:["Press the button using ",(0,i.jsx)(t.code,{children:"userEvent.press(button)"})," to simulate a user interaction."]}),"\n",(0,i.jsxs)(t.li,{children:["Run all timers using ",(0,i.jsx)(t.code,{children:"jest.runAllTimers()"})," to skip animations (e.g. animations in the ",(0,i.jsx)(t.code,{children:"Pressable"})," for the button)."]}),"\n",(0,i.jsxs)(t.li,{children:["Assert that the ",(0,i.jsx)(t.code,{children:"Settings screen"})," is visible after the navigation."]}),"\n"]}),"\n",(0,i.jsx)(t.h3,{id:"reacting-to-a-navigation-event",children:"Reacting to a navigation event"}),"\n",(0,i.jsx)(t.p,{children:'In this example, we have a stack navigator with two screens: Home and Surprise. We will write a test that asserts that the text "Surprise!" is displayed after navigating to the Surprise screen.'}),"\n",(0,i.jsxs)(r.A,{groupId:"example",queryString:"example",children:[(0,i.jsx)(o.A,{value:"static",label:"Static",default:!0,children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyStack.js"',children:"import { useNavigation } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { Button, Text, View } from 'react-native';\nimport { useEffect, useState } from 'react';\n\nconst HomeScreen = () => {\n  const navigation = useNavigation();\n\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Text>Home screen</Text>\n      <Button\n        onPress={() => navigation.navigate('Surprise')}\n        title=\"Click here!\"\n      />\n    </View>\n  );\n};\n\nconst SurpriseScreen = () => {\n  const navigation = useNavigation();\n\n  const [textVisible, setTextVisible] = useState(false);\n\n  useEffect(() => {\n    navigation.addListener('transitionEnd', () => setTextVisible(true));\n  }, [navigation]);\n\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      {textVisible ? <Text>Surprise!</Text> : ''}\n    </View>\n  );\n};\n\nexport const MyStack = createStackNavigator({\n  screens: {\n    Home: HomeScreen,\n    Surprise: SurpriseScreen,\n  },\n});\n"})})}),(0,i.jsx)(o.A,{value:"dynamic",label:"Dynamic",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyStack.js"',children:"import { useNavigation } from '@react-navigation/native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { useEffect, useState } from 'react';\nimport { Button, Text, View } from 'react-native';\n\nconst HomeScreen = () => {\n  const navigation = useNavigation();\n\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Text>Home screen</Text>\n      <Button\n        onPress={() => navigation.navigate('Surprise')}\n        title=\"Click here!\"\n      />\n    </View>\n  );\n};\n\nconst SurpriseScreen = () => {\n  const navigation = useNavigation();\n\n  const [textVisible, setTextVisible] = useState(false);\n\n  useEffect(() => {\n    navigation.addListener('transitionEnd', () => setTextVisible(true));\n  }, [navigation]);\n\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      {textVisible ? <Text>Surprise!</Text> : ''}\n    </View>\n  );\n};\n\nconst Stack = createStackNavigator();\n\nexport const MyStack = () => {\n  return (\n    <Stack.Navigator>\n      <Stack.Screen name=\"Home\" component={HomeScreen} />\n      <Stack.Screen name=\"Surprise\" component={SurpriseScreen} />\n    </Stack.Navigator>\n  );\n};\n"})})})]}),"\n",(0,i.jsxs)(r.A,{groupId:"example",queryString:"example",children:[(0,i.jsx)(o.A,{value:"static",label:"Static",default:!0,children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyStack.test.js"',children:"import { expect, jest, test } from '@jest/globals';\nimport { createStaticNavigation } from '@react-navigation/native';\nimport { act, render, screen, userEvent } from '@testing-library/react-native';\n\nimport { MyStack } from './MyStack';\n\njest.useFakeTimers();\n\ntest('shows surprise text after navigating to surprise screen', async () => {\n  const user = userEvent.setup();\n\n  const Navigation = createStaticNavigation(MyStack);\n\n  render(<Navigation />);\n\n  await user.press(screen.getByLabelText('Click here!'));\n\n  act(() => jest.runAllTimers());\n\n  expect(screen.getByText('Surprise!')).toBeVisible();\n});\n"})})}),(0,i.jsx)(o.A,{value:"dynamic",label:"Dynamic",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyStack.test.js"',children:"import { expect, jest, test } from '@jest/globals';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { act, render, screen, userEvent } from '@testing-library/react-native';\n\nimport { MyStack } from './MyStack';\n\njest.useFakeTimers();\n\ntest('shows surprise text after navigating to surprise screen', async () => {\n  const user = userEvent.setup();\n\n  render(\n    <NavigationContainer>\n      <MyStack />\n    </NavigationContainer>\n  );\n\n  await user.press(screen.getByLabelText('Click here!'));\n\n  act(() => jest.runAllTimers());\n\n  expect(screen.getByText('Surprise!')).toBeVisible();\n});\n"})})})]}),"\n",(0,i.jsx)(t.p,{children:"In the above test, we:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Render the ",(0,i.jsx)(t.code,{children:"MyStack"})," navigator within a ",(0,i.jsx)(t.a,{href:"/docs/navigation-container",children:"NavigationContainer"})," in our test."]}),"\n",(0,i.jsxs)(t.li,{children:["Get the button using the ",(0,i.jsx)(t.code,{children:"getByLabelText"})," query that matches its title."]}),"\n",(0,i.jsxs)(t.li,{children:["Press the button using ",(0,i.jsx)(t.code,{children:"userEvent.press(button)"})," to simulate a user interaction."]}),"\n",(0,i.jsxs)(t.li,{children:["Run all timers using ",(0,i.jsx)(t.code,{children:"jest.runAllTimers()"})," to skip animations (e.g. navigation animation between screens)."]}),"\n",(0,i.jsxs)(t.li,{children:["Assert that the ",(0,i.jsx)(t.code,{children:"Surprise!"})," text is visible after the transition to the Surprise screen is complete."]}),"\n"]}),"\n",(0,i.jsxs)(t.h3,{id:"fetching-data-with-usefocuseffect",children:["Fetching data with ",(0,i.jsx)(t.code,{children:"useFocusEffect"})]}),"\n",(0,i.jsx)(t.p,{children:"In this example, we have a bottom tab navigator with two tabs: Home and Pokemon. We will write a test that asserts the data fetching logic on focus in the Pokemon screen."}),"\n",(0,i.jsxs)(r.A,{groupId:"example",queryString:"example",children:[(0,i.jsx)(o.A,{value:"static",label:"Static",default:!0,children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyTabs.js"',children:"import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { useCallback, useState } from 'react';\nimport { Text, View } from 'react-native';\n\nfunction HomeScreen() {\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Text>Home screen</Text>\n    </View>\n  );\n}\n\nconst url = 'https://pokeapi.co/api/v2/pokemon/ditto';\n\nfunction PokemonScreen() {\n  const [profileData, setProfileData] = useState({ status: 'loading' });\n\n  useFocusEffect(\n    useCallback(() => {\n      if (profileData.status === 'success') {\n        return;\n      }\n\n      setProfileData({ status: 'loading' });\n\n      const controller = new AbortController();\n\n      const fetchUser = async () => {\n        try {\n          const response = await fetch(url, { signal: controller.signal });\n          const data = await response.json();\n\n          setProfileData({ status: 'success', data: data });\n        } catch (error) {\n          setProfileData({ status: 'error' });\n        }\n      };\n\n      fetchUser();\n\n      return () => {\n        controller.abort();\n      };\n    }, [profileData.status])\n  );\n\n  if (profileData.status === 'loading') {\n    return (\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n        <Text>Loading...</Text>\n      </View>\n    );\n  }\n\n  if (profileData.status === 'error') {\n    return (\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n        <Text>An error occurred!</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Text>{profileData.data.name}</Text>\n    </View>\n  );\n}\n\nexport const MyTabs = createBottomTabNavigator({\n  screens: {\n    Home: HomeScreen,\n    Pokemon: PokemonScreen,\n  },\n});\n"})})}),(0,i.jsx)(o.A,{value:"dynamic",label:"Dynamic",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyTabs.js"',children:"import { createBottomTabNavigator } from '@react-navigation/bottom-tabs';\nimport { useFocusEffect } from '@react-navigation/native';\nimport { useCallback, useState } from 'react';\nimport { Text, View } from 'react-native';\n\nfunction HomeScreen() {\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Text>Home screen</Text>\n    </View>\n  );\n}\n\nconst url = 'https://pokeapi.co/api/v2/pokemon/ditto';\n\nfunction PokemonInfoScreen() {\n  const [profileData, setProfileData] = useState({ status: 'loading' });\n\n  useFocusEffect(\n    useCallback(() => {\n      if (profileData.status === 'success') {\n        return;\n      }\n\n      setProfileData({ status: 'loading' });\n\n      const controller = new AbortController();\n\n      const fetchUser = async () => {\n        try {\n          const response = await fetch(url, { signal: controller.signal });\n          const data = await response.json();\n\n          setProfileData({ status: 'success', data: data });\n        } catch (error) {\n          setProfileData({ status: 'error' });\n        }\n      };\n\n      fetchUser();\n\n      return () => {\n        controller.abort();\n      };\n    }, [profileData.status])\n  );\n\n  if (profileData.status === 'loading') {\n    return (\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n        <Text>Loading...</Text>\n      </View>\n    );\n  }\n\n  if (profileData.status === 'error') {\n    return (\n      <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n        <Text>An error occurred!</Text>\n      </View>\n    );\n  }\n\n  return (\n    <View style={{ flex: 1, justifyContent: 'center', alignItems: 'center' }}>\n      <Text>{profileData.data.name}</Text>\n    </View>\n  );\n}\n\nconst Tab = createBottomTabNavigator();\n\nexport function MyTabs() {\n  return (\n    <Tab.Navigator screenOptions={{ headerShown: false }}>\n      <Tab.Screen name=\"Home\" component={HomeScreen} />\n      <Tab.Screen name=\"Pokemon\" component={PokemonScreen} />\n    </Tab.Navigator>\n  );\n}\n"})})})]}),"\n",(0,i.jsxs)(t.p,{children:["To make the test deterministic and isolate it from the real backend, you can mock the network requests with a library such as ",(0,i.jsx)(t.a,{href:"https://mswjs.io/",children:"Mock Service Worker"}),":"]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="msw-handlers.js"',children:"import { delay, http, HttpResponse } from 'msw';\n\nexport const handlers = [\n  http.get('https://pokeapi.co/api/v2/pokemon/ditto', async () => {\n    await delay(1000);\n\n    return HttpResponse.json({\n      id: 132,\n      name: 'ditto',\n    });\n  }),\n];\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Here we setup a handler that mocks responses from the API (for this example we're using ",(0,i.jsx)(t.a,{href:"https://pokeapi.co/",children:"Pok\xe9API"}),"). Additionally, we ",(0,i.jsx)(t.code,{children:"delay"})," the response by 1000ms to simulate a network request delay."]}),"\n",(0,i.jsx)(t.p,{children:"Then, we write a Node.js integration module to use the Mock Service Worker in our tests:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="msw-node.js"',children:"import { setupServer } from 'msw/node';\nimport { handlers } from './msw-handlers';\n\nconst server = setupServer(...handlers);\n"})}),"\n",(0,i.jsxs)(t.p,{children:["Refer to the documentation of the library to learn more about setting it up in your project - ",(0,i.jsx)(t.a,{href:"https://mswjs.io/docs/getting-started",children:"Getting started"}),", ",(0,i.jsx)(t.a,{href:"https://mswjs.io/docs/integrations/react-native",children:"React Native integration"}),"."]}),"\n",(0,i.jsxs)(r.A,{groupId:"example",queryString:"example",children:[(0,i.jsx)(o.A,{value:"static",label:"Static",default:!0,children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyTabs.test.js"',children:"import './msw-node';\n\nimport { expect, jest, test } from '@jest/globals';\nimport { createStaticNavigation } from '@react-navigation/native';\nimport { act, render, screen, userEvent } from '@testing-library/react-native';\n\nimport { MyTabs } from './MyTabs';\n\njest.useFakeTimers();\n\ntest('loads data on Pokemon info screen after focus', async () => {\n  const user = userEvent.setup();\n\n  const Navigation = createStaticNavigation(MyTabs);\n\n  render(<Navigation />);\n\n  const homeTabButton = screen.getByLabelText('Home, tab, 1 of 2');\n  const profileTabButton = screen.getByLabelText('Profile, tab, 2 of 2');\n\n  await user.press(profileTabButton);\n\n  expect(screen.getByText('Loading...')).toBeVisible();\n\n  await act(() => jest.runAllTimers());\n\n  expect(screen.getByText('ditto')).toBeVisible();\n\n  await user.press(homeTabButton);\n\n  await act(() => jest.runAllTimers());\n\n  await user.press(profileTabButton);\n\n  expect(screen.queryByText('Loading...')).not.toBeVisible();\n  expect(screen.getByText('ditto')).toBeVisible();\n});\n"})})}),(0,i.jsx)(o.A,{value:"dynamic",label:"Dynamic",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyTabs.test.js"',children:"import './msw-node';\n\nimport { expect, jest, test } from '@jest/globals';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { act, render, screen, userEvent } from '@testing-library/react-native';\n\nimport { MyTabs } from './MyTabs';\n\njest.useFakeTimers();\n\ntest('loads data on Pokemon info screen after focus', async () => {\n  const user = userEvent.setup();\n\n  render(\n    <NavigationContainer>\n      <MyTabs />\n    </NavigationContainer>\n  );\n\n  const homeTabButton = screen.getByLabelText('Home, tab, 1 of 2');\n  const profileTabButton = screen.getByLabelText('Profile, tab, 2 of 2');\n\n  await user.press(profileTabButton);\n\n  expect(screen.getByText('Loading...')).toBeVisible();\n\n  await act(() => jest.runAllTimers());\n\n  expect(screen.getByText('ditto')).toBeVisible();\n\n  await user.press(homeTabButton);\n\n  await act(() => jest.runAllTimers());\n\n  await user.press(profileTabButton);\n\n  expect(screen.queryByText('Loading...')).not.toBeVisible();\n  expect(screen.getByText('ditto')).toBeVisible();\n});\n"})})})]}),"\n",(0,i.jsx)(t.p,{children:"In the above test, we:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Assert that the ",(0,i.jsx)(t.code,{children:"Loading..."})," text is visible while the data is being fetched."]}),"\n",(0,i.jsxs)(t.li,{children:["Run all timers using ",(0,i.jsx)(t.code,{children:"jest.runAllTimers()"})," to skip delays in the network request."]}),"\n",(0,i.jsxs)(t.li,{children:["Assert that the ",(0,i.jsx)(t.code,{children:"ditto"})," text is visible after the data is fetched."]}),"\n",(0,i.jsx)(t.li,{children:"Press the home tab button to navigate to the home screen."}),"\n",(0,i.jsxs)(t.li,{children:["Run all timers using ",(0,i.jsx)(t.code,{children:"jest.runAllTimers()"})," to skip animations (e.g. animations in the ",(0,i.jsx)(t.code,{children:"Pressable"})," for the button)."]}),"\n",(0,i.jsx)(t.li,{children:"Press the profile tab button to navigate back to the Pokemon screen."}),"\n",(0,i.jsxs)(t.li,{children:["Ensure that cached data is shown by asserting that the ",(0,i.jsx)(t.code,{children:"Loading..."})," text is not visible and the ",(0,i.jsx)(t.code,{children:"ditto"})," text is visible."]}),"\n"]}),"\n",(0,i.jsx)(t.admonition,{type:"note",children:(0,i.jsxs)(t.p,{children:["In a production app, we recommend using a library like ",(0,i.jsx)(t.a,{href:"https://tanstack.com/query/",children:"React Query"})," to handle data fetching and caching. The above example is for demonstration purposes only."]})}),"\n",(0,i.jsx)(t.h3,{id:"re-usable-components",children:"Re-usable components"}),"\n",(0,i.jsx)(t.p,{children:"To make it easier to test components that don't depend on the navigation structure, we can create a light-weight test navigator:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="TestStackNavigator.js"',children:"import { useNavigationBuilder, StackRouter } from '@react-navigation/native';\n\nfunction TestStackNavigator(props) {\n  const { state, descriptors, NavigationContent } = useNavigationBuilder(\n    StackRouter,\n    props\n  );\n\n  return (\n    <NavigationContent>\n      {state.routes.map((route, index) => {\n        return (\n          <View key={route.key} aria-hidden={index !== state.index}>\n            {descriptors[route.key].render()}\n          </View>\n        );\n      })}\n    </NavigationContent>\n  );\n}\n\nexport function createTestStackNavigator(config) {\n  return createNavigatorFactory(TestStackNavigator)(config);\n}\n"})}),"\n",(0,i.jsxs)(t.p,{children:["This lets us test React Navigation specific logic such as ",(0,i.jsx)(t.code,{children:"useFocusEffect"})," without needing to set up a full navigator."]}),"\n",(0,i.jsx)(t.p,{children:"We can use this test navigator in our tests like this:"}),"\n",(0,i.jsxs)(r.A,{groupId:"example",queryString:"example",children:[(0,i.jsx)(o.A,{value:"static",label:"Static",default:!0,children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyComponent.test.js"',children:"import { act, render, screen } from '@testing-library/react-native';\nimport { createStaticNavigation } from '@react-navigation/native';\nimport { createTestStackNavigator } from './TestStackNavigator';\nimport { MyComponent } from './MyComponent';\n\ntest('does not show modal when not focused', () => {\n  const TestStack = createTestStackNavigator({\n    screens: {\n      A: MyComponent,\n      B: () => null,\n    },\n  });\n\n  const Navigation = createStaticNavigation(TestStack);\n\n  render(\n    <Navigation\n      initialState={{\n        routes: [{ name: 'A' }, { name: 'B' }],\n      }}\n    />\n  );\n\n  expect(screen.queryByText('Modal')).not.toBeVisible();\n});\n\ntest('shows modal when focused', () => {\n  const TestStack = createTestStackNavigator({\n    screens: {\n      A: MyComponent,\n      B: () => null,\n    },\n  });\n\n  const Navigation = createStaticNavigation(TestStack);\n\n  render(\n    <Navigation\n      initialState={{\n        routes: [{ name: 'B' }, { name: 'A' }],\n      }}\n    />\n  );\n\n  expect(screen.getByText('Modal')).toBeVisible();\n});\n"})})}),(0,i.jsx)(o.A,{value:"dynamic",label:"Dynamic",children:(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",metastring:'title="MyComponent.test.js"',children:"import { act, render, screen } from '@testing-library/react-native';\nimport { NavigationContainer } from '@react-navigation/native';\nimport { createTestStackNavigator } from './TestStackNavigator';\nimport { MyComponent } from './MyComponent';\n\ntest('does not show modal when not focused', () => {\n  const Stack = createTestStackNavigator();\n\n  const TestStack = () => (\n    <Stack.Navigator>\n      <Stack.Screen name=\"A\" component={MyComponent} />\n      <Stack.Screen name=\"B\" component={() => null} />\n    </Stack.Navigator>\n  );\n\n  render(\n    <NavigationContainer\n      initialState={{\n        routes: [{ name: 'A' }, { name: 'B' }],\n      }}\n    >\n      <TestStack />\n    </NavigationContainer>\n  );\n\n  expect(screen.queryByText('Modal')).not.toBeVisible();\n});\n\ntest('shows modal when focused', () => {\n  const Stack = createTestStackNavigator();\n\n  const TestStack = () => (\n    <Stack.Navigator>\n      <Stack.Screen name=\"A\" component={MyComponent} />\n      <Stack.Screen name=\"B\" component={() => null} />\n    </Stack.Navigator>\n  );\n\n  render(\n    <NavigationContainer\n      initialState={{\n        routes: [{ name: 'B' }, { name: 'A' }],\n      }}\n    >\n      <TestStack />\n    </NavigationContainer>\n  );\n\n  expect(screen.getByText('Modal')).toBeVisible();\n});\n"})})})]}),"\n",(0,i.jsxs)(t.p,{children:["Here we create a test stack navigator using the ",(0,i.jsx)(t.code,{children:"createTestStackNavigator"})," function. We then render the ",(0,i.jsx)(t.code,{children:"MyComponent"})," component within the test navigator and assert that the modal is shown or hidden based on the focus state."]}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"initialState"})," prop is used to set the initial state of the navigator, i.e. which screens are rendered in the stack and which one is focused. See ",(0,i.jsx)(t.a,{href:"/docs/navigation-state",children:"navigation state"})," for more information on the structure of the state object."]}),"\n",(0,i.jsxs)(t.p,{children:["You can also pass a ",(0,i.jsx)(t.a,{href:"/docs/navigation-container#ref",children:(0,i.jsx)(t.code,{children:"ref"})})," to programmatically navigate in your tests."]}),"\n",(0,i.jsx)(t.p,{children:"The test navigator is a simplified version of the stack navigator, but it's still a real navigator and behaves like one. This means that you can use it to test any other navigation logic."}),"\n",(0,i.jsxs)(t.p,{children:["See ",(0,i.jsx)(t.a,{href:"/docs/custom-navigators",children:"Custom navigators"})," for more information on how to write custom navigators if you want adjust the behavior of the test navigator or add more functionality."]}),"\n",(0,i.jsx)(t.h2,{id:"best-practices",children:"Best practices"}),"\n",(0,i.jsx)(t.p,{children:"Generally, we recommend avoiding mocking React Navigation. Mocking can help you isolate the component you're testing, but when testing components with navigation logic, mocking means that your tests don't test for the navigation logic."}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Mocking APIs such as ",(0,i.jsx)(t.code,{children:"useFocusEffect"})," means you're not testing the focus logic in your component."]}),"\n",(0,i.jsxs)(t.li,{children:["Mocking ",(0,i.jsx)(t.code,{children:"navigation"})," prop or ",(0,i.jsx)(t.code,{children:"useNavigation"})," means that the ",(0,i.jsx)(t.code,{children:"navigation"})," object may not have the same shape as the real one."]}),"\n",(0,i.jsxs)(t.li,{children:["Asserting ",(0,i.jsx)(t.code,{children:"navigation.navigate"})," calls means you only test that the function was called, not that the call was correct based on the navigation structure."]}),"\n",(0,i.jsx)(t.li,{children:"etc."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Avoiding mocks means additional work when writing tests, but it also means:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:["Refactors that don't change the logic won't break the tests, e.g. changing ",(0,i.jsx)(t.code,{children:"navigation"})," prop to ",(0,i.jsx)(t.code,{children:"useNavigation"}),", using a different navigation action that does the same thing, etc."]}),"\n",(0,i.jsx)(t.li,{children:"Library upgrades or refactor that actually change the behavior will correctly break the tests, surfacing actual regressions."}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:"Tests should break when there's a regression, not due to a refactor. Otherwise it leads to additional work to fix the tests, making it harder to know when a regression is introduced."})]})}function g(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},19365:(e,t,n)=>{n.d(t,{A:()=>r});n(96540);var a=n(34164);const i={tabItem:"tabItem_Ymn6"};var s=n(74848);function r(e){let{children:t,hidden:n,className:r}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,a.A)(i.tabItem,r),hidden:n,children:t})}},11470:(e,t,n)=>{n.d(t,{A:()=>T});var a=n(96540),i=n(34164),s=n(17559),r=n(23104),o=n(56347),c=n(205),l=n(57485),d=n(31682),u=n(70679);function h(e){var t,n;return null!=(t=null==(n=a.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error("Docusaurus error: Bad <Tabs> child <"+("string"==typeof e.type?e.type:e.type.name)+'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.')})))?void 0:n.filter(Boolean))?t:[]}function g(e){const{values:t,children:n}=e;return(0,a.useMemo)((()=>{const e=null!=t?t:function(e){return h(e).map((e=>{let{props:{value:t,label:n,attributes:a,default:i}}=e;return{value:t,label:n,attributes:a,default:i}}))}(n);return function(e){const t=(0,d.XI)(e,((e,t)=>e.value===t.value));if(t.length>0)throw new Error('Docusaurus error: Duplicate values "'+t.map((e=>e.value)).join(", ")+'" found in <Tabs>. Every value needs to be unique.')}(e),e}),[t,n])}function m(e){let{value:t,tabValues:n}=e;return n.some((e=>e.value===t))}function p(e){let{queryString:t=!1,groupId:n}=e;const i=(0,o.W6)(),s=function(e){let{queryString:t=!1,groupId:n}=e;if("string"==typeof t)return t;if(!1===t)return null;if(!0===t&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=n?n:null}({queryString:t,groupId:n});return[(0,l.aZ)(s),(0,a.useCallback)((e=>{if(!s)return;const t=new URLSearchParams(i.location.search);t.set(s,e),i.replace(Object.assign({},i.location,{search:t.toString()}))}),[s,i])]}function v(e){const{defaultValue:t,queryString:n=!1,groupId:i}=e,s=g(e),[r,o]=(0,a.useState)((()=>function(e){var t;let{defaultValue:n,tabValues:a}=e;if(0===a.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:a}))throw new Error('Docusaurus error: The <Tabs> has a defaultValue "'+n+'" but none of its children has the corresponding value. Available values are: '+a.map((e=>e.value)).join(", ")+". If you intend to show no default tab, use defaultValue={null} instead.");return n}const i=null!=(t=a.find((e=>e.default)))?t:a[0];if(!i)throw new Error("Unexpected error: 0 tabValues");return i.value}({defaultValue:t,tabValues:s}))),[l,d]=p({queryString:n,groupId:i}),[h,v]=function(e){let{groupId:t}=e;const n=function(e){return e?"docusaurus.tab."+e:null}(t),[i,s]=(0,u.Dv)(n);return[i,(0,a.useCallback)((e=>{n&&s.set(e)}),[n,s])]}({groupId:i}),x=(()=>{const e=null!=l?l:h;return m({value:e,tabValues:s})?e:null})();(0,c.A)((()=>{x&&o(x)}),[x]);return{selectedValue:r,selectValue:(0,a.useCallback)((e=>{if(!m({value:e,tabValues:s}))throw new Error("Can't select invalid tab value="+e);o(e),d(e),v(e)}),[d,v,s]),tabValues:s}}var x=n(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=n(74848);function b(e){let{className:t,block:n,selectedValue:a,selectValue:s,tabValues:o}=e;const c=[],{blockElementScrollPositionUntilNextRender:l}=(0,r.a_)(),d=e=>{const t=e.currentTarget,n=c.indexOf(t),i=o[n].value;i!==a&&(l(t),s(i))},u=e=>{var t;let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{var a;const t=c.indexOf(e.currentTarget)+1;n=null!=(a=c[t])?a:c[0];break}case"ArrowLeft":{var i;const t=c.indexOf(e.currentTarget)-1;n=null!=(i=c[t])?i:c[c.length-1];break}}null==(t=n)||t.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},t),children:o.map((e=>{let{value:t,label:n,attributes:s}=e;return(0,j.jsx)("li",Object.assign({role:"tab",tabIndex:a===t?0:-1,"aria-selected":a===t,ref:e=>{c.push(e)},onKeyDown:u,onClick:d},s,{className:(0,i.A)("tabs__item",f.tabItem,null==s?void 0:s.className,{"tabs__item--active":a===t}),children:null!=n?n:t}),t)}))})}function y(e){let{lazy:t,children:n,selectedValue:s}=e;const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(t){const e=r.find((e=>e.props.value===s));return e?(0,a.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:r.map(((e,t)=>(0,a.cloneElement)(e,{key:t,hidden:e.props.value!==s})))})}function w(e){const t=v(e);return(0,j.jsxs)("div",{className:(0,i.A)(s.G.tabs.container,"tabs-container",f.tabList),children:[(0,j.jsx)(b,Object.assign({},t,e)),(0,j.jsx)(y,Object.assign({},t,e))]})}function T(e){const t=(0,x.A)();return(0,j.jsx)(w,Object.assign({},e,{children:h(e.children)}),String(t))}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>o});var a=n(96540);const i={},s=a.createContext(i);function r(e){const t=a.useContext(s);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(s.Provider,{value:t},e.children)}}}]);