"use strict";(self.webpackChunkreact_navigation_website_next=self.webpackChunkreact_navigation_website_next||[]).push([[11890],{64713:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>s,default:()=>l,frontMatter:()=>r,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"deep-linking","title":"Deep linking","description":"In this guide we will set up our app to handle external URIs. Let\'s suppose that we want a URI like example://chat/Eric to open our app and link straight into a chat screen for some user named \\"Eric\\".","source":"@site/versioned_docs/version-1.x/deep-linking.md","sourceDirName":".","slug":"/deep-linking","permalink":"/docs/1.x/deep-linking","draft":false,"unlisted":false,"editUrl":"https://github.com/react-navigation/react-navigation.github.io/edit/main/versioned_docs/version-1.x/deep-linking.md","tags":[],"version":"1.x","frontMatter":{"id":"deep-linking","title":"Deep linking","sidebar_label":"Deep linking"},"sidebar":"docs","previous":{"title":"Navigating without the navigation prop","permalink":"/docs/1.x/navigating-without-navigation-prop"},"next":{"title":"Screen tracking","permalink":"/docs/1.x/screen-tracking"}}');var a=i(74848),o=i(28453);const r={id:"deep-linking",title:"Deep linking",sidebar_label:"Deep linking",rawMarkdown:'---\nid: deep-linking\ntitle: Deep linking\nsidebar_label: Deep linking\n---\n\nIn this guide we will set up our app to handle external URIs. Let\'s suppose that we want a URI like `example://chat/Eric` to open our app and link straight into a chat screen for some user named "Eric".\n\n## Configuration\n\nPreviously, we had defined a navigator like this:\n\n```js\nconst SimpleApp = StackNavigator({\n  Home: { screen: HomeScreen },\n  Chat: { screen: ChatScreen },\n});\n```\n\nWe want paths like `chat/Eric` to link to a "Chat" screen with the `user` passed as a param. Let\'s re-configure our chat screen with a `path` that tells the router what relative path to match against, and what params to extract. This path spec would be `chat/:user`.\n\n```js\nconst SimpleApp = StackNavigator({\n  Home: { screen: HomeScreen },\n  Chat: {\n    screen: ChatScreen,\n    path: \'chat/:user\',\n  },\n});\n```\n\n## Set up with Expo projects\n\nYou need to specify a scheme for your app. You can register for a scheme in your `app.json` by adding a string under the scheme key:\n\n```json\n{\n  "expo": {\n    "scheme": "example"\n  }\n}\n```\n\n### URI Prefix\n\nNext, let\'s configure our navigation container to extract the path from the app\'s incoming URI.\n\n```js\nconst SimpleApp = StackNavigator({...});\n\nconst prefix = Expo.Linking.makeUrl(\'/\');\n\nconst MainApp = () => <SimpleApp uriPrefix={prefix} />;\n```\n\n### iOS\n\nTo test the URI on the simulator (Expo client app ), run the following:\n\n```\nxcrun simctl openurl booted [ put your URI prefix in here ]\n\n// for example\n\nxcrun simctl openurl booted exp://127.0.0.1:19004/--/chat/Eric\n\n```\n\n### Android\n\nTo test the intent handling in Android (Expo client app ), run the following:\n\n```\nadb shell am start -W -a android.intent.action.VIEW -d "[ put your URI prefix in here ]" com.simpleapp\n\n// for example\n\nadb shell am start -W -a android.intent.action.VIEW -d "exp://127.0.0.1:19004/--/chat/Eric" com.simpleapp\n\n```\n\nRead the [Expo linking guide](https://docs.expo.io/versions/latest/guides/linking.html) for more information about how to configure linking in projects built with Expo.\n\n## Set up with `react-native init` projects\n\n### URI Prefix\n\nNext, let\'s configure our navigation container to extract the path from the app\'s incoming URI.\n\n```js\nconst SimpleApp = StackNavigator({...}));\n\nconst prefix = \'example://\';\n\nconst MainApp = () => <SimpleApp uriPrefix={prefix} />;\n```\n\n### iOS\n\nLet\'s configure the native iOS app to open based on the `example://` URI scheme.\n\nIn `SimpleApp/ios/SimpleApp/AppDelegate.m`:\n\n```\n// Add the header at the top of the file:\n#import <React/RCTLinkingManager.h>\n\n// Add this above the `@end`:\n- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url\n  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation\n{\n  return [RCTLinkingManager application:application openURL:url\n                      sourceApplication:sourceApplication annotation:annotation];\n}\n```\n\nIn Xcode, open the project at `SimpleApp/ios/SimpleApp.xcodeproj`. Select the project in sidebar and navigate to the info tab. Scroll down to "URL Types" and add one. In the new URL type, set the identifier and the URL scheme to your desired URL scheme.\n\n![Xcode project info URL types with example added](/assets/deep-linking/xcode-linking.png)\n\nNow you can press play in Xcode, or re-build on the command line:\n\n```bash\nreact-native run-ios\n```\n\nTo test the URI on the simulator, run the following:\n\n```\nxcrun simctl openurl booted example://chat/Eric\n```\n\nTo test the URI on a real device, open Safari and type `example://chat/Eric`.\n\n### Android\n\nTo configure the external linking in Android, you can create a new intent in the manifest.\n\nIn `SimpleApp/android/app/src/main/AndroidManifest.xml`, do these followings adjustments:\n\n1. Set `launchMode` of `MainActivity` to `singleTask` in order to receive intent on existing `MainActivity`. It is useful if you want to perform navigation using deep link you have been registered - [details](http://developer.android.com/training/app-indexing/deep-linking.html#adding-filters)\n2. Add the new `intent-filter` inside the `MainActivity` entry with a `VIEW` type action:\n\n```\n<activity\n    android:name=".MainActivity"\n    android:launchMode="singleTask">\n    <intent-filter>\n        <action android:name="android.intent.action.MAIN" />\n        <category android:name="android.intent.category.LAUNCHER" />\n    </intent-filter>\n    <intent-filter>\n        <action android:name="android.intent.action.VIEW" />\n        <category android:name="android.intent.category.DEFAULT" />\n        <category android:name="android.intent.category.BROWSABLE" />\n        <data android:scheme="example" />\n    </intent-filter>\n</activity>\n```\n\nNow, re-install the app:\n\n```bash\nreact-native run-android\n```\n\nTo test the intent handling in Android, run the following:\n\n```\nadb shell am start -W -a android.intent.action.VIEW -d "example://chat/Eric" com.simpleapp\n```\n\n## Disable deep linking\n\nUnfortunately, version 1.x does not support to disable deep-linking handling. If you wish to handle deep-linking yourself instead of `react-navigation`, please upgrade to newer versions.\n'},s=void 0,d={},c=[{value:"Configuration",id:"configuration",level:2},{value:"Set up with Expo projects",id:"set-up-with-expo-projects",level:2},{value:"URI Prefix",id:"uri-prefix",level:3},{value:"iOS",id:"ios",level:3},{value:"Android",id:"android",level:3},{value:"Set up with <code>react-native init</code> projects",id:"set-up-with-react-native-init-projects",level:2},{value:"URI Prefix",id:"uri-prefix-1",level:3},{value:"iOS",id:"ios-1",level:3},{value:"Android",id:"android-1",level:3},{value:"Disable deep linking",id:"disable-deep-linking",level:2}];function p(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...n.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(e.p,{children:["In this guide we will set up our app to handle external URIs. Let's suppose that we want a URI like ",(0,a.jsx)(e.code,{children:"example://chat/Eric"}),' to open our app and link straight into a chat screen for some user named "Eric".']}),"\n",(0,a.jsx)(e.h2,{id:"configuration",children:"Configuration"}),"\n",(0,a.jsx)(e.p,{children:"Previously, we had defined a navigator like this:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:"const SimpleApp = StackNavigator({\n  Home: { screen: HomeScreen },\n  Chat: { screen: ChatScreen },\n});\n"})}),"\n",(0,a.jsxs)(e.p,{children:["We want paths like ",(0,a.jsx)(e.code,{children:"chat/Eric"}),' to link to a "Chat" screen with the ',(0,a.jsx)(e.code,{children:"user"})," passed as a param. Let's re-configure our chat screen with a ",(0,a.jsx)(e.code,{children:"path"})," that tells the router what relative path to match against, and what params to extract. This path spec would be ",(0,a.jsx)(e.code,{children:"chat/:user"}),"."]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:"const SimpleApp = StackNavigator({\n  Home: { screen: HomeScreen },\n  Chat: {\n    screen: ChatScreen,\n    path: 'chat/:user',\n  },\n});\n"})}),"\n",(0,a.jsx)(e.h2,{id:"set-up-with-expo-projects",children:"Set up with Expo projects"}),"\n",(0,a.jsxs)(e.p,{children:["You need to specify a scheme for your app. You can register for a scheme in your ",(0,a.jsx)(e.code,{children:"app.json"})," by adding a string under the scheme key:"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-json",children:'{\n  "expo": {\n    "scheme": "example"\n  }\n}\n'})}),"\n",(0,a.jsx)(e.h3,{id:"uri-prefix",children:"URI Prefix"}),"\n",(0,a.jsx)(e.p,{children:"Next, let's configure our navigation container to extract the path from the app's incoming URI."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:"const SimpleApp = StackNavigator({...});\n\nconst prefix = Expo.Linking.makeUrl('/');\n\nconst MainApp = () => <SimpleApp uriPrefix={prefix} />;\n"})}),"\n",(0,a.jsx)(e.h3,{id:"ios",children:"iOS"}),"\n",(0,a.jsx)(e.p,{children:"To test the URI on the simulator (Expo client app ), run the following:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"xcrun simctl openurl booted [ put your URI prefix in here ]\n\n// for example\n\nxcrun simctl openurl booted exp://127.0.0.1:19004/--/chat/Eric\n\n"})}),"\n",(0,a.jsx)(e.h3,{id:"android",children:"Android"}),"\n",(0,a.jsx)(e.p,{children:"To test the intent handling in Android (Expo client app ), run the following:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'adb shell am start -W -a android.intent.action.VIEW -d "[ put your URI prefix in here ]" com.simpleapp\n\n// for example\n\nadb shell am start -W -a android.intent.action.VIEW -d "exp://127.0.0.1:19004/--/chat/Eric" com.simpleapp\n\n'})}),"\n",(0,a.jsxs)(e.p,{children:["Read the ",(0,a.jsx)(e.a,{href:"https://docs.expo.io/versions/latest/guides/linking.html",children:"Expo linking guide"})," for more information about how to configure linking in projects built with Expo."]}),"\n",(0,a.jsxs)(e.h2,{id:"set-up-with-react-native-init-projects",children:["Set up with ",(0,a.jsx)(e.code,{children:"react-native init"})," projects"]}),"\n",(0,a.jsx)(e.h3,{id:"uri-prefix-1",children:"URI Prefix"}),"\n",(0,a.jsx)(e.p,{children:"Next, let's configure our navigation container to extract the path from the app's incoming URI."}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-js",children:"const SimpleApp = StackNavigator({...}));\n\nconst prefix = 'example://';\n\nconst MainApp = () => <SimpleApp uriPrefix={prefix} />;\n"})}),"\n",(0,a.jsx)(e.h3,{id:"ios-1",children:"iOS"}),"\n",(0,a.jsxs)(e.p,{children:["Let's configure the native iOS app to open based on the ",(0,a.jsx)(e.code,{children:"example://"})," URI scheme."]}),"\n",(0,a.jsxs)(e.p,{children:["In ",(0,a.jsx)(e.code,{children:"SimpleApp/ios/SimpleApp/AppDelegate.m"}),":"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"// Add the header at the top of the file:\n#import <React/RCTLinkingManager.h>\n\n// Add this above the `@end`:\n- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url\n  sourceApplication:(NSString *)sourceApplication annotation:(id)annotation\n{\n  return [RCTLinkingManager application:application openURL:url\n                      sourceApplication:sourceApplication annotation:annotation];\n}\n"})}),"\n",(0,a.jsxs)(e.p,{children:["In Xcode, open the project at ",(0,a.jsx)(e.code,{children:"SimpleApp/ios/SimpleApp.xcodeproj"}),'. Select the project in sidebar and navigate to the info tab. Scroll down to "URL Types" and add one. In the new URL type, set the identifier and the URL scheme to your desired URL scheme.']}),"\n",(0,a.jsx)(e.p,{children:(0,a.jsx)(e.img,{alt:"Xcode project info URL types with example added",src:i(33367).A+"",width:"1930",height:"1172"})}),"\n",(0,a.jsx)(e.p,{children:"Now you can press play in Xcode, or re-build on the command line:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"react-native run-ios\n"})}),"\n",(0,a.jsx)(e.p,{children:"To test the URI on the simulator, run the following:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:"xcrun simctl openurl booted example://chat/Eric\n"})}),"\n",(0,a.jsxs)(e.p,{children:["To test the URI on a real device, open Safari and type ",(0,a.jsx)(e.code,{children:"example://chat/Eric"}),"."]}),"\n",(0,a.jsx)(e.h3,{id:"android-1",children:"Android"}),"\n",(0,a.jsx)(e.p,{children:"To configure the external linking in Android, you can create a new intent in the manifest."}),"\n",(0,a.jsxs)(e.p,{children:["In ",(0,a.jsx)(e.code,{children:"SimpleApp/android/app/src/main/AndroidManifest.xml"}),", do these followings adjustments:"]}),"\n",(0,a.jsxs)(e.ol,{children:["\n",(0,a.jsxs)(e.li,{children:["Set ",(0,a.jsx)(e.code,{children:"launchMode"})," of ",(0,a.jsx)(e.code,{children:"MainActivity"})," to ",(0,a.jsx)(e.code,{children:"singleTask"})," in order to receive intent on existing ",(0,a.jsx)(e.code,{children:"MainActivity"}),". It is useful if you want to perform navigation using deep link you have been registered - ",(0,a.jsx)(e.a,{href:"http://developer.android.com/training/app-indexing/deep-linking.html#adding-filters",children:"details"})]}),"\n",(0,a.jsxs)(e.li,{children:["Add the new ",(0,a.jsx)(e.code,{children:"intent-filter"})," inside the ",(0,a.jsx)(e.code,{children:"MainActivity"})," entry with a ",(0,a.jsx)(e.code,{children:"VIEW"})," type action:"]}),"\n"]}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'<activity\n    android:name=".MainActivity"\n    android:launchMode="singleTask">\n    <intent-filter>\n        <action android:name="android.intent.action.MAIN" />\n        <category android:name="android.intent.category.LAUNCHER" />\n    </intent-filter>\n    <intent-filter>\n        <action android:name="android.intent.action.VIEW" />\n        <category android:name="android.intent.category.DEFAULT" />\n        <category android:name="android.intent.category.BROWSABLE" />\n        <data android:scheme="example" />\n    </intent-filter>\n</activity>\n'})}),"\n",(0,a.jsx)(e.p,{children:"Now, re-install the app:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{className:"language-bash",children:"react-native run-android\n"})}),"\n",(0,a.jsx)(e.p,{children:"To test the intent handling in Android, run the following:"}),"\n",(0,a.jsx)(e.pre,{children:(0,a.jsx)(e.code,{children:'adb shell am start -W -a android.intent.action.VIEW -d "example://chat/Eric" com.simpleapp\n'})}),"\n",(0,a.jsx)(e.h2,{id:"disable-deep-linking",children:"Disable deep linking"}),"\n",(0,a.jsxs)(e.p,{children:["Unfortunately, version 1.x does not support to disable deep-linking handling. If you wish to handle deep-linking yourself instead of ",(0,a.jsx)(e.code,{children:"react-navigation"}),", please upgrade to newer versions."]})]})}function l(n={}){const{wrapper:e}={...(0,o.R)(),...n.components};return e?(0,a.jsx)(e,{...n,children:(0,a.jsx)(p,{...n})}):p(n)}},33367:(n,e,i)=>{i.d(e,{A:()=>t});const t=i.p+"assets/images/xcode-linking-01851f542d8d995806310b42e21986be.png"},28453:(n,e,i)=>{i.d(e,{R:()=>r,x:()=>s});var t=i(96540);const a={},o=t.createContext(a);function r(n){const e=t.useContext(o);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(a):n.components||a:r(n.components),t.createElement(o.Provider,{value:e},n.children)}}}]);