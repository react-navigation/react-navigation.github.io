"use strict";(self.webpackChunkreact_navigation_website_next=self.webpackChunkreact_navigation_website_next||[]).push([["81444"],{88679(e,n,t){t.r(n),t.d(n,{metadata:()=>r,default:()=>d,frontMatter:()=>i,contentTitle:()=>s,toc:()=>c,assets:()=>l});var r=JSON.parse('{"id":"preventing-going-back","title":"Preventing going back","description":"Sometimes you may want to prevent the user from leaving a screen to avoid losing unsaved changes. There are a couple of things you may want to do in this case:","source":"@site/versioned_docs/version-8.x/preventing-going-back.md","sourceDirName":".","slug":"/preventing-going-back","permalink":"/docs/8.x/preventing-going-back","draft":false,"unlisted":false,"editUrl":"https://github.com/react-navigation/react-navigation.github.io/edit/main/versioned_docs/version-8.x/preventing-going-back.md","tags":[],"version":"8.x","frontMatter":{"id":"preventing-going-back","title":"Preventing going back","sidebar_label":"Preventing going back"},"sidebar":"docs","previous":{"title":"Shared element transitions","permalink":"/docs/8.x/shared-element-transitions"},"next":{"title":"Call a function on focus","permalink":"/docs/8.x/function-after-focusing-screen"}}'),o=t(74848),a=t(28453);t(78010),t(57250);let i={id:"preventing-going-back",title:"Preventing going back",sidebar_label:"Preventing going back"},s,l={},c=[{value:"Prevent the user from leaving the screen",id:"prevent-the-user-from-leaving-the-screen",level:2},{value:"Prevent the user from leaving the app",id:"prevent-the-user-from-leaving-the-app",level:2}];function u(e){let n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.p,{children:"Sometimes you may want to prevent the user from leaving a screen to avoid losing unsaved changes. There are a couple of things you may want to do in this case:"}),"\n",(0,o.jsx)(n.h2,{id:"prevent-the-user-from-leaving-the-screen",children:"Prevent the user from leaving the screen"}),"\n",(0,o.jsxs)(n.p,{children:["The ",(0,o.jsx)(n.code,{children:"usePreventRemove"})," hook allows you to prevent the user from leaving a screen. See the ",(0,o.jsx)(n.a,{href:"/docs/8.x/use-prevent-remove",children:(0,o.jsx)(n.code,{children:"usePreventRemove"})})," docs for more details."]}),"\n",(0,o.jsxs)(t,{children:[(0,o.jsx)("summary",{children:"Previous approach"}),(0,o.jsx)(n.p,{children:"Previously, the way to do this was to:"}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Override the back button in the header"}),"\n",(0,o.jsx)(n.li,{children:"Disable back swipe gesture"}),"\n",(0,o.jsx)(n.li,{children:"Override system back button/gesture on Android"}),"\n"]}),(0,o.jsx)(n.p,{children:"However, using the hook has many important differences in addition to being less code:"}),(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"It's not coupled to any specific buttons, going back from custom buttons will trigger it as well"}),"\n",(0,o.jsx)(n.li,{children:"It's not coupled to any specific actions, any action that removes the route from the state will trigger it"}),"\n",(0,o.jsx)(n.li,{children:"It works across nested navigators, e.g. if the screen is being removed due to an action in the parent navigator"}),"\n",(0,o.jsx)(n.li,{children:"The user can still swipe back in the stack navigator, however, the swipe will be canceled if the event is prevented"}),"\n",(0,o.jsx)(n.li,{children:"It's possible to continue the same action that triggered the event"}),"\n"]})]}),"\n",(0,o.jsx)(n.h2,{id:"prevent-the-user-from-leaving-the-app",children:"Prevent the user from leaving the app"}),"\n",(0,o.jsxs)(n.p,{children:["To be able to prompt the user before they leave the app on Android, you can use the ",(0,o.jsx)(n.code,{children:"BackHandler"})," API from React Native:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"import { Alert, BackHandler } from 'react-native';\n\n// ...\n\nReact.useEffect(() => {\n  const onBackPress = () => {\n    Alert.alert(\n      'Exit App',\n      'Do you want to exit?',\n      [\n        {\n          text: 'Cancel',\n          onPress: () => {\n            // Do nothing\n          },\n          style: 'cancel',\n        },\n        { text: 'YES', onPress: () => BackHandler.exitApp() },\n      ],\n      { cancelable: false }\n    );\n\n    return true;\n  };\n\n  const backHandler = BackHandler.addEventListener(\n    'hardwareBackPress',\n    onBackPress\n  );\n\n  return () => backHandler.remove();\n}, []);\n"})}),"\n",(0,o.jsxs)(n.p,{children:["On the Web, you can use the ",(0,o.jsx)(n.code,{children:"beforeunload"})," event to prompt the user before they leave the browser tab:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-js",children:"React.useEffect(() => {\n  const onBeforeUnload = (event) => {\n    // Prevent the user from leaving the page\n    event.preventDefault();\n    event.returnValue = true;\n  };\n\n  window.addEventListener('beforeunload', onBeforeUnload);\n\n  return () => {\n    window.removeEventListener('beforeunload', onBeforeUnload);\n  };\n}, []);\n"})}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsx)(n.p,{children:"The user can still close the app by swiping it away from the app switcher or closing the browser tab. Or the app can be closed by the system due to low memory or other reasons. It's also not possible to prevent leaving the app on iOS. We recommend persisting the data and restoring it when the app is opened again instead of prompting the user before they leave the app."})})]})}function d(e={}){let{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}},57250(e,n,t){t.d(n,{A:()=>a});var r=t(74848);t(96540);var o=t(34164);function a(e){let{children:n,hidden:t,className:a}=e;return(0,r.jsx)("div",{role:"tabpanel",className:(0,o.A)("tabItem_Ymn6",a),hidden:t,children:n})}},78010(e,n,t){t.d(n,{A:()=>w});var r=t(74848),o=t(96540),a=t(34164),i=t(88287),s=t(28584),l=t(56347),c=t(99989),u=t(96629),d=t(80618),p=t(41367);function h(e){var n,t;return null!=(n=null==(t=o.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,o.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error("Docusaurus error: Bad <Tabs> child <".concat("string"==typeof e.type?e.type:e.type.name,'>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.'))}))?void 0:t.filter(Boolean))?n:[]}function f(e){let{value:n,tabValues:t}=e;return t.some(e=>e.value===n)}var v=t(19863);function b(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){var r;r=t[n],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return e}function g(e,n){return n=null!=n?n:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):(function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t})(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}),e}function m(e){let{className:n,block:t,selectedValue:o,selectValue:i,tabValues:l}=e,c=[],{blockElementScrollPositionUntilNextRender:u}=(0,s.a_)(),d=e=>{let n=e.currentTarget,t=l[c.indexOf(n)].value;t!==o&&(u(n),i(t))},p=e=>{var n,t;let r=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{let t=c.indexOf(e.currentTarget)+1;r=null!=(n=c[t])?n:c[0];break}case"ArrowLeft":{let n=c.indexOf(e.currentTarget)-1;r=null!=(t=c[n])?t:c[c.length-1]}}null==r||r.focus()};return(0,r.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},n),children:l.map(e=>{let{value:n,label:t,attributes:i}=e;return(0,r.jsx)("li",g(b({role:"tab",tabIndex:o===n?0:-1,"aria-selected":o===n,ref:e=>{c.push(e)},onKeyDown:p,onClick:d},i),{className:(0,a.A)("tabs__item","tabItem_LNqP",null==i?void 0:i.className,{"tabs__item--active":o===n}),children:null!=t?t:n}),n)})})}function y(e){let{lazy:n,children:t,selectedValue:i}=e,s=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){let e=s.find(e=>e.props.value===i);return e?(0,o.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,r.jsx)("div",{className:"margin-top--md",children:s.map((e,n)=>(0,o.cloneElement)(e,{key:n,hidden:e.props.value!==i}))})}function j(e){let n=function(e){let n,{defaultValue:t,queryString:r=!1,groupId:a}=e,i=function(e){let{values:n,children:t}=e;return(0,o.useMemo)(()=>{let e=null!=n?n:h(t).map(e=>{let{props:{value:n,label:t,attributes:r,default:o}}=e;return{value:n,label:t,attributes:r,default:o}}),r=(0,d.XI)(e,(e,n)=>e.value===n.value);if(r.length>0)throw Error('Docusaurus error: Duplicate values "'.concat(r.map(e=>e.value).join(", "),'" found in <Tabs>. Every value needs to be unique.'));return e},[n,t])}(e),[s,v]=(0,o.useState)(()=>(function(e){var n;let{defaultValue:t,tabValues:r}=e;if(0===r.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(t){if(!f({value:t,tabValues:r}))throw Error('Docusaurus error: The <Tabs> has a defaultValue "'.concat(t,'" but none of its children has the corresponding value. Available values are: ').concat(r.map(e=>e.value).join(", "),". If you intend to show no default tab, use defaultValue={null} instead."));return t}let o=null!=(n=r.find(e=>e.default))?n:r[0];if(!o)throw Error("Unexpected error: 0 tabValues");return o.value})({defaultValue:t,tabValues:i})),[b,g]=function(e){let{queryString:n=!1,groupId:t}=e,r=(0,l.W6)(),a=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return null!=t?t:null}({queryString:n,groupId:t});return[(0,u.aZ)(a),(0,o.useCallback)(e=>{var n,t;if(!a)return;let o=new URLSearchParams(r.location.search);o.set(a,e),r.replace((n=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){var r;r=t[n],n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r})}return e}({},r.location),t=t={search:o.toString()},Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):(function(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t.push.apply(t,r)}return t})(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}),n))},[a,r])]}({queryString:r,groupId:a}),[m,y]=function(e){let{groupId:n}=e,t=n?"docusaurus.tab.".concat(n):null,[r,a]=(0,p.Dv)(t);return[r,(0,o.useCallback)(e=>{t&&a.set(e)},[t,a])]}({groupId:a}),j=f({value:n=null!=b?b:m,tabValues:i})?n:null;return(0,c.A)(()=>{j&&v(j)},[j]),{selectedValue:s,selectValue:(0,o.useCallback)(e=>{if(!f({value:e,tabValues:i}))throw Error("Can't select invalid tab value=".concat(e));v(e),g(e),y(e)},[g,y,i]),tabValues:i}}(e);return(0,r.jsxs)("div",{className:(0,a.A)(i.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,r.jsx)(m,b({},n,e)),(0,r.jsx)(y,b({},n,e))]})}function w(e){let n=(0,v.A)();return(0,r.jsx)(j,g(b({},e),{children:h(e.children)}),String(n))}},28453(e,n,t){t.d(n,{R:()=>i,x:()=>s});var r=t(96540);let o={},a=r.createContext(o);function i(e){let n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:i(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);