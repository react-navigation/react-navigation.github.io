"use strict";(self.webpackChunkreact_navigation_website_next=self.webpackChunkreact_navigation_website_next||[]).push([[6679],{73433:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>o,metadata:()=>a,toc:()=>d});var t=i(85893),r=i(11151);const o={id:"transitioner",title:"Transitioner",sidebar_label:"Transitioner"},s=void 0,a={id:"transitioner",title:"Transitioner",description:"Transitioner is a React component that helps manage transitions for complex animated components. It manages the timing of animations and keeps track of various screens as they enter and leave, but it doesn't know what anything looks like, because rendering is entirely deferred to the developer.",source:"@site/versioned_docs/version-1.x/transitioner.md",sourceDirName:".",slug:"/transitioner",permalink:"/docs/1.x/transitioner",draft:!1,unlisted:!1,editUrl:"https://github.com/react-navigation/react-navigation.github.io/edit/main/versioned_docs/version-1.x/transitioner.md",tags:[],version:"1.x",frontMatter:{id:"transitioner",title:"Transitioner",sidebar_label:"Transitioner"},sidebar:"docs",previous:{title:"Navigation views",permalink:"/docs/1.x/navigation-views"},next:{title:"Pitch & anti-pitch",permalink:"/docs/1.x/pitch"}},c={},d=[{value:"Example",id:"example",level:2},{value:"Props",id:"props",level:2},{value:"<code>configureTransition</code> function",id:"configuretransition-function",level:3},{value:"Examples",id:"examples",level:4},{value:"Flow definition",id:"flow-definition",level:4},{value:"Parameters",id:"parameters",level:4},{value:"Returns",id:"returns",level:4},{value:"<code>navigation</code> prop",id:"navigation-prop",level:3},{value:"Example value",id:"example-value",level:4},{value:"Flow definition",id:"flow-definition-1",level:4},{value:"<code>render</code> function",id:"render-function",level:3},{value:"Examples",id:"examples-1",level:4},{value:"Flow definition",id:"flow-definition-2",level:4},{value:"Parameters",id:"parameters-1",level:4},{value:"Returns",id:"returns-1",level:4},{value:"<code>onTransitionStart</code> function",id:"ontransitionstart-function",level:3},{value:"Flow definition",id:"flow-definition-3",level:4},{value:"Parameters",id:"parameters-2",level:4},{value:"Returns",id:"returns-2",level:4},{value:"<code>onTransitionEnd</code> function",id:"ontransitionend-function",level:3},{value:"Flow definition",id:"flow-definition-4",level:4},{value:"Parameters",id:"parameters-3",level:4},{value:"Returns",id:"returns-3",level:4}];function l(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"Transitioner"})," is a React component that helps manage transitions for complex animated components. It manages the timing of animations and keeps track of various screens as they enter and leave, but it doesn't know what anything looks like, because rendering is entirely deferred to the developer."]}),"\n",(0,t.jsxs)(e.p,{children:["Under the covers, ",(0,t.jsx)(e.code,{children:"Transitioner"})," is used to implement ",(0,t.jsx)(e.code,{children:"CardStack"}),", and hence the ",(0,t.jsx)(e.code,{children:"StackNavigator"}),"."]}),"\n",(0,t.jsxs)(e.p,{children:["The most useful thing ",(0,t.jsx)(e.code,{children:"Transitioner"})," does is to take in a prop of the current navigation state. When routes are removed from that navigation state, ",(0,t.jsx)(e.code,{children:"Transitioner"})," will coordinate the transition away from those routes, keeping them on screen even though they are gone from the navigation state."]}),"\n",(0,t.jsx)(e.h2,{id:"example",children:"Example"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-jsx",children:"class MyNavView extends Component {\n  ...\n  render() {\n    return (\n      <Transitioner\n        configureTransition={this._configureTransition}\n        navigation={this.props.navigation}\n        render={this._render}\n        onTransitionStart={this.onTransitionStart}\n        onTransitionEnd={this.onTransitionEnd}\n      />\n    );\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"props",children:"Props"}),"\n",(0,t.jsxs)(e.h3,{id:"configuretransition-function",children:[(0,t.jsx)(e.code,{children:"configureTransition"})," function"]}),"\n",(0,t.jsxs)(e.p,{children:["Invoked on ",(0,t.jsx)(e.code,{children:"Transitioner.componentWillReceiveProps"}),", this function allows customization of animation parameters such as ",(0,t.jsx)(e.code,{children:"duration"}),". The value returned from this function will be fed into a timing function, by default ",(0,t.jsx)(e.code,{children:"Animated.timing()"}),", as its config."]}),"\n",(0,t.jsx)(e.h4,{id:"examples",children:"Examples"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"_configureTransition(transitionProps, prevTransitionProps) {\n  return {\n    // duration in milliseconds, default: 250\n    duration: 500,\n    // An easing function from `Easing`, default: Easing.inOut(Easing.ease)\n    easing: Easing.bounce,\n  }\n}\n"})}),"\n",(0,t.jsxs)(e.p,{children:["Note: ",(0,t.jsx)(e.code,{children:"duration"})," and ",(0,t.jsx)(e.code,{children:"easing"})," are only applicable when the timing function is ",(0,t.jsx)(e.code,{children:"Animated.timing"}),". We can also use a different timing function and its corresponding config parameters, like so:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"_configureTransition(transitionProps, prevTransitionProps) {\n  return {\n    // A timing function, default: Animated.timing.\n    timing: Animated.spring,\n    // Some parameters relevant to Animated.spring\n    friction: 1,\n    tension: 0.5,\n  }\n}\n"})}),"\n",(0,t.jsx)(e.h4,{id:"flow-definition",children:"Flow definition"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"  configureTransition: (\n    transitionProps: NavigationTransitionProps,\n    prevTransitionProps: ?NavigationTransitionProps,\n  ) => NavigationTransitionSpec,\n"})}),"\n",(0,t.jsx)(e.h4,{id:"parameters",children:"Parameters"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"transitionProps"}),": the current ",(0,t.jsx)(e.a,{href:"https://github.com/react-navigation/react-navigation/blob/1.x/flow/react-navigation.js",children:"NavigationTransitionProps"})," created from the current navigation state and props"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"prevTransitionProps"}),": the previous ",(0,t.jsx)(e.a,{href:"https://github.com/react-navigation/react-navigation/blob/1.x/flow/react-navigation.js",children:"NavigationTransitionProps"})," created from the previous navigation state and props"]}),"\n"]}),"\n",(0,t.jsx)(e.h4,{id:"returns",children:"Returns"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["An object of type ",(0,t.jsx)(e.a,{href:"https://github.com/react-navigation/react-navigation/blob/1.x/flow/react-navigation.js",children:"NavigationTransitionSpec"})," that will be fed into an Animated timing function as its config"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"navigation-prop",children:[(0,t.jsx)(e.code,{children:"navigation"})," prop"]}),"\n",(0,t.jsxs)(e.p,{children:["An object with ",(0,t.jsx)(e.code,{children:"state"})," that represents the navigation state, with ",(0,t.jsx)(e.code,{children:"routes"})," and an active route ",(0,t.jsx)(e.code,{children:"index"}),". Also includes ",(0,t.jsx)(e.code,{children:"dispatch"})," and other methods for requesting actions."]}),"\n",(0,t.jsx)(e.h4,{id:"example-value",children:"Example value"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"{\n   // Index refers to the active child route in the routes array.\n  index: 1,\n  routes: [\n    { key: 'DF2FGWGAS-12', routeName: 'ContactHome' },\n    { key: 'DF2FGWGAS-13', routeName: 'ContactDetail', params: { personId: 123 } }\n  ]\n}\n"})}),"\n",(0,t.jsx)(e.h4,{id:"flow-definition-1",children:"Flow definition"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"export type NavigationState = {\n  index: number,\n  routes: Array<NavigationRoute>,\n};\n"})}),"\n",(0,t.jsxs)(e.p,{children:["For more information about the ",(0,t.jsx)(e.code,{children:"NavigationRoute"})," type, check out its ",(0,t.jsx)(e.a,{href:"https://github.com/react-navigation/react-navigation/blob/1.x/flow/react-navigation.js",children:"flow definition"}),"."]}),"\n",(0,t.jsxs)(e.h3,{id:"render-function",children:[(0,t.jsx)(e.code,{children:"render"})," function"]}),"\n",(0,t.jsxs)(e.p,{children:["Invoked from ",(0,t.jsx)(e.code,{children:"Transitioner.render()"}),". This function performs the actual rendering delegated from ",(0,t.jsx)(e.code,{children:"Transitioner"}),". In this function, we can use the information included in the ",(0,t.jsx)(e.code,{children:"transitionProps"})," and ",(0,t.jsx)(e.code,{children:"prevTransitionProps"})," parameters to render scenes, create animations and handle gestures."]}),"\n",(0,t.jsxs)(e.p,{children:["There are a few important properties of the ",(0,t.jsx)(e.code,{children:"transitionProps"})," and ",(0,t.jsx)(e.code,{children:"prevTransitionProps"})," parameters that are useful for the tasks mentioned above:"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"scenes: Array<NavigationScene>"})," - a list of all available scenes"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"position: NavigationAnimatedValue"})," - the progressive index of the transitioner's navigation state"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"progress: NavigationAnimatedValue"})," - the value that represents the progress of the transition when navigation state changes from one to another. Its numeric value will range from 0 to 1."]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["For the complete list of properties of ",(0,t.jsx)(e.code,{children:"NavigationTransitionProps"}),", check out its ",(0,t.jsx)(e.a,{href:"https://github.com/react-navigation/react-navigation/blob/1.x/flow/react-navigation.js",children:"flow definition"}),"."]}),"\n",(0,t.jsx)(e.h4,{id:"examples-1",children:"Examples"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"transitionProps.scenes"})," is the list of all available scenes. It is up to the implementor to determine how to lay them out on the screen. For example, we can render the scenes as a stack of cards like so:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-jsx",children:"_render(transitionProps, prevTransitionProps) {\n  const scenes = transitionProps.scenes.map(scene => this._renderScene(transitionProps, scene));\n  return (\n    <View style={styles.stack}>\n      {scenes}\n    </View>\n  );\n}\n"})}),"\n",(0,t.jsxs)(e.p,{children:["We can then use an ",(0,t.jsx)(e.code,{children:"Animated.View"})," to animate the transition. To create necessary animated style properties, such as ",(0,t.jsx)(e.code,{children:"opacity"}),", we can interpolate on ",(0,t.jsx)(e.code,{children:"position"})," and ",(0,t.jsx)(e.code,{children:"progress"})," values that come with ",(0,t.jsx)(e.code,{children:"transitionProps"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-jsx",children:"_renderScene(transitionProps, scene) {\n  const { position } = transitionProps;\n  const { index } = scene;\n  const opacity = position.interpolate({\n    inputRange: [index-1, index, index+1],\n    outputRange: [0, 1, 0],\n  });\n  // The prop `router` is populated when we call `createNavigator`.\n  const Scene = this.props.router.getComponent(scene.route.routeName);\n  return (\n    <Animated.View style={{ opacity }}>\n      { Scene }\n    </Animated.View>\n  )\n}\n"})}),"\n",(0,t.jsx)(e.p,{children:"The above code creates a cross fade animation during transition."}),"\n",(0,t.jsxs)(e.p,{children:["For a comprehensive tutorial on how to create custom transitions, see this ",(0,t.jsx)(e.a,{href:"http://www.reactnativediary.com/2016/12/20/navigation-experimental-custom-transition-1.html",children:"blog post"}),"."]}),"\n",(0,t.jsx)(e.h4,{id:"flow-definition-2",children:"Flow definition"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"render: (transitionProps: NavigationTransitionProps, prevTransitionProps: ?NavigationTransitionProps) => React.Node,\n"})}),"\n",(0,t.jsx)(e.h4,{id:"parameters-1",children:"Parameters"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"transitionProps"}),": the current ",(0,t.jsx)(e.a,{href:"https://github.com/react-navigation/react-navigation/blob/1.x/flow/react-navigation.js",children:"NavigationTransitionProps"})," created from the current state and props"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"prevTransitionProps"}),": the previous ",(0,t.jsx)(e.a,{href:"https://github.com/react-navigation/react-navigation/blob/1.x/flow/react-navigation.js",children:"NavigationTransitionProps"})," created from the previous state and props"]}),"\n"]}),"\n",(0,t.jsx)(e.h4,{id:"returns-1",children:"Returns"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"A ReactElement, which will be used to render the Transitioner component"}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"ontransitionstart-function",children:[(0,t.jsx)(e.code,{children:"onTransitionStart"})," function"]}),"\n",(0,t.jsx)(e.p,{children:"Invoked when the transition animation is about to start."}),"\n",(0,t.jsxs)(e.p,{children:["If you return a promise from ",(0,t.jsx)(e.code,{children:"onTransitionStart"}),", the transition animation will begin after the promise is resolved."]}),"\n",(0,t.jsx)(e.h4,{id:"flow-definition-3",children:"Flow definition"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"onTransitionStart: (transitionProps: NavigationTransitionProps, prevTransitionProps: ?NavigationTransitionProps) => (Promise | void),\n"})}),"\n",(0,t.jsx)(e.h4,{id:"parameters-2",children:"Parameters"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"transitionProps"}),": the current ",(0,t.jsx)(e.a,{href:"https://github.com/react-navigation/react-navigation/blob/1.x/flow/react-navigation.js",children:"NavigationTransitionProps"})," created from the current state and props"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"prevTransitionProps"}),": the previous ",(0,t.jsx)(e.a,{href:"https://github.com/react-navigation/react-navigation/blob/1.x/flow/react-navigation.js",children:"NavigationTransitionProps"})," created from the previous state and props"]}),"\n"]}),"\n",(0,t.jsx)(e.h4,{id:"returns-2",children:"Returns"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.code,{children:"Promise"})," to delay the start of the transition animation, or none to begin the transition animation immediately."]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"ontransitionend-function",children:[(0,t.jsx)(e.code,{children:"onTransitionEnd"})," function"]}),"\n",(0,t.jsx)(e.p,{children:"Invoked once the transition animation completes."}),"\n",(0,t.jsxs)(e.p,{children:["If you return a promise from ",(0,t.jsx)(e.code,{children:"onTransitionEnd"}),", any queued transition animations will begin after the promise is resolved."]}),"\n",(0,t.jsx)(e.h4,{id:"flow-definition-4",children:"Flow definition"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-js",children:"onTransitionEnd: () => void\n"})}),"\n",(0,t.jsx)(e.h4,{id:"parameters-3",children:"Parameters"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"none."}),"\n"]}),"\n",(0,t.jsx)(e.h4,{id:"returns-3",children:"Returns"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"none."}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(l,{...n})}):l(n)}},11151:(n,e,i)=>{i.d(e,{Z:()=>a,a:()=>s});var t=i(67294);const r={},o=t.createContext(r);function s(n){const e=t.useContext(o);return t.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(r):n.components||r:s(n.components),t.createElement(o.Provider,{value:e},n.children)}}}]);