(window.webpackJsonp=window.webpackJsonp||[]).push([[70],{129:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return i})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return s})),n.d(t,"default",(function(){return l}));var a=n(1),o=n(6),r=(n(0),n(427)),i={title:"React Navigation v5 + React Native Paper = \u2764\ufe0f",author:"Dawid Urbaniak",author_url:"https://twitter.com/trensik",author_title:"Paper Team",author_image_url:"https://avatars0.githubusercontent.com/u/18584155?s=200&v=4",tags:["tutorial","react-native-paper"]},c={permalink:"/blog/2020/01/29/using-react-navigation-5-with-react-native-paper",source:"@site/blog/2020-01-29-using-react-navigation-5-with-react-native-paper.md",description:"This is a guest post by the React Native Paper team. If you like this guide, check out React Native Paper for more!",date:"2020-01-29T00:00:00.000Z",tags:[{label:"tutorial",permalink:"/blog/tags/tutorial"},{label:"react-native-paper",permalink:"/blog/tags/react-native-paper"}],title:"React Navigation v5 + React Native Paper = \u2764\ufe0f",readingTime:18.515,truncated:!0,prevItem:{title:"React Navigation 5.0 - A new way to navigate",permalink:"/blog/2020/02/06/react-navigation-5.0"},nextItem:{title:"Using React Navigation 5 with UI Kitten",permalink:"/blog/2019/11/04/using-react-navigation-5-with-ui-kitten"}},s=[{value:"Introduction",id:"introduction",children:[{value:"What is React Native Paper?",id:"what-is-react-native-paper",children:[]}]},{value:"Overview of the App",id:"overview-of-the-app",children:[]},{value:"Getting started",id:"getting-started",children:[]},{value:"React Navigation and React Native Paper initial setup.",id:"react-navigation-and-react-native-paper-initial-setup",children:[]},{value:"Drawer",id:"drawer",children:[]},{value:"Stack Navigator + Paper&#39;s Appbar",id:"stack-navigator--papers-appbar",children:[]},{value:"Bottom Navigation",id:"bottom-navigation",children:[]},{value:"FAB and Portal",id:"fab-and-portal",children:[]},{value:"Theming",id:"theming",children:[]},{value:"Summary",id:"summary",children:[]}],p={rightToc:s};function l(e){var t=e.components,n=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("p",null,"This is a guest post by the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://reactnativepaper.com/"}),"React Native Paper")," team. If you like this guide, check out React Native Paper for more!"),Object(r.b)("p",null,"In this blog post, we'll show you how to build a Twitter clone app using React Navigation v5 and Paper."),Object(r.b)("h2",{id:"introduction"},"Introduction"),Object(r.b)("p",null,"The React Navigation v5 comes with many great improvements compared to previous version. It not only provides a cross-platform native Stack, but also the API was redesigned from the ground up to allow things that were never possible before. Thanks to the component-based API, all of the configuration is happening inside the ",Object(r.b)("strong",{parentName:"p"},"render method"),". This means we can access ",Object(r.b)("strong",{parentName:"p"},"props"),", ",Object(r.b)("strong",{parentName:"p"},"state")," and ",Object(r.b)("strong",{parentName:"p"},"context")," and can ",Object(r.b)("strong",{parentName:"p"},"dynamically change configuration")," for the navigator."),Object(r.b)("h3",{id:"what-is-react-native-paper"},"What is React Native Paper?"),Object(r.b)("p",null,Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://reactnativepaper.com/"}),"React Native Paper")," is a UI component library that implements ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://material.io/design/"}),"MD Guidelines"),".\nIt allows building beautiful interfaces on Mobile and Web with high-quality cross-platform components.\nFurthermore, Paper provides you with a full ",Object(r.b)("strong",{parentName:"p"},"theming support"),", ",Object(r.b)("strong",{parentName:"p"},"accessibility"),", ",Object(r.b)("strong",{parentName:"p"},"RTL")," and it will take care of ",Object(r.b)("strong",{parentName:"p"},"platform adaptation"),". This means you can focus on building apps with ready to use components instead of reimplementing the boring stuff."),Object(r.b)("p",null,"In this guide, we would like to show you how to integrate React Navigation with Paper's components. To show all the details of the integration we've decided to build a clone of Twitter. Of course, the functionalities will be very limited but the navigation part and main screens should look and feel similar."),Object(r.b)("p",null,"In the following gif, you can see what is the final version of the app gonna looks like:"),Object(r.b)("img",{src:"/assets/blog/using-react-navigation-5-with-paper/final-app.gif",height:"480"}),Object(r.b)("h2",{id:"overview-of-the-app"},"Overview of the App"),Object(r.b)("p",null,"Since original Twitter is a very complex app, we will build only a part of it. This means we will implement:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Drawer"),Object(r.b)("li",{parentName:"ul"},"Stack Navigator with two screens: Screen showing bottom navigation and Details of a tweet"),Object(r.b)("li",{parentName:"ul"},"Bottom navigation with 3 tabs: Feed, Notifications, and Messages")),Object(r.b)("p",null,"I will focus this guide on a React Navigation and React Native Paper integration. It means I won't show you how to build all of the components necessary to create such an app, but you can always check the full implementation in the ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/Trancever/twitterClone"}),"github repo"),"."),Object(r.b)("p",null,"Let's get started!"),Object(r.b)("h2",{id:"getting-started"},"Getting started"),Object(r.b)("p",null,"I assume you already have an ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://expo.io/"}),"Expo")," project running locally. If not, make sure to create one. I chose Expo over plain React-Native because it includes most of the dependencies that we need so there is less work to do for us."),Object(r.b)("p",null,"Let's install React Native Paper, React Navigation v5 and other required dependencies."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"npm install @react-navigation/native @react-navigation/stack @react-native-community/masked-view @react-navigation/drawer @react-navigation/material-bottom-tabs react-native-paper\n")),Object(r.b)("p",null,"In the next step we will make sure versions of these libraries are compatible."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-bash"}),"expo install react-native-gesture-handler react-native-reanimated react-native-screens react-native-safe-area-context\n")),Object(r.b)("p",null,"After you run these two commands you should be ready to go. Let's start implementing the app!"),Object(r.b)("h2",{id:"react-navigation-and-react-native-paper-initial-setup"},"React Navigation and React Native Paper initial setup."),Object(r.b)("p",null,"Both these libraries require minimal setup."),Object(r.b)("p",null,"In case of React Native Paper, we need to wrap the component tree with a ",Object(r.b)("strong",{parentName:"p"},"Provider"),". You can do this inside the exported component in the ",Object(r.b)("strong",{parentName:"p"},"App.js")," file."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport { Provider as PaperProvider } from 'react-native-paper';\nimport Main from './src/Main';\n\nexport default function App() {\n  return (\n    <PaperProvider>\n      <Main />\n    </PaperProvider>\n  );\n}\n")),Object(r.b)("p",null,"The ",Object(r.b)("strong",{parentName:"p"},"PaperProvider")," provides the theme to all the components in the framework. It also acts as a portal to components that need to be rendered at the top level. Check the full ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://callstack.github.io/react-native-paper/getting-started.html"}),"Getting-Started")," page for more information."),Object(r.b)("p",null,"React Navigation setup looks similar. There is a component called ",Object(r.b)("strong",{parentName:"p"},"NavigationContainer")," which manages our navigation tree and contains the navigation state. It must wrap all navigator structure. We will render this component in ",Object(r.b)("strong",{parentName:"p"},"App.tsx")," inside a ",Object(r.b)("strong",{parentName:"p"},"PaperProvider"),". More information can be found in the official ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/hello-react-navigation"}),"documentation"),"."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport { Provider as PaperProvider } from 'react-native-paper';\nimport { NavigationContainer } from '@react-navigation/native';\nimport Main from './src/Main';\n\nexport default function App() {\n  return (\n    <PaperProvider>\n      <NavigationContainer>\n        <Main />\n      </NavigationContainer>\n    </PaperProvider>\n  );\n}\n")),Object(r.b)("h2",{id:"drawer"},"Drawer"),Object(r.b)("p",null,"In our Twitter clone, we want to implement a Drawer that is available from any screen in the app. This means it has to be a topmost navigator."),Object(r.b)("p",null,"In React Navigation v5 there is a common pattern for creating navigators. After importing ",Object(r.b)("strong",{parentName:"p"},"createXNavigator")," function from the navigator package of your choice you can use ",Object(r.b)("strong",{parentName:"p"},"Navigator")," and ",Object(r.b)("strong",{parentName:"p"},"Screen")," components from the value it returns."),Object(r.b)("p",null,"So let's create a basic version of a Drawer:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport { Text, View } from 'react-native';\nimport { createDrawerNavigator } from '@react-navigation/drawer';\n\nconst Drawer = createDrawerNavigator();\n\nfunction DrawerContent() {\n  return (\n    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n      <Text>Drawer content</Text>\n    </View>\n  );\n}\n\nfunction HomeScreen() {\n  return (\n    <View style={{ flex: 1, alignItems: 'center', justifyContent: 'center' }}>\n      <Text>Home Screen</Text>\n    </View>\n  );\n}\n\nexport const RootNavigator = () => {\n  return (\n    <Drawer.Navigator drawerContent={() => <DrawerContent />}>\n      <Drawer.Screen name=\"Home\" component={HomeScreen} />\n    </Drawer.Navigator>\n  );\n};\n")),Object(r.b)("p",null,"That's what we see on a screen:"),Object(r.b)("img",{src:"/assets/blog/using-react-navigation-5-with-paper/simple-drawer.gif",height:"480"}),Object(r.b)("p",null,"We can open a drawer with a swipe gesture, it looks very smooth. However, the UI doesn't look very impressive so let's add more content to the drawer to make it look just like in the final version."),Object(r.b)("p",null,"We will use:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},Object(r.b)("em",{parentName:"strong"},"DrawerContentScrollView"))," and ",Object(r.b)("strong",{parentName:"li"},Object(r.b)("em",{parentName:"strong"},"DrawerItem"))," from ",Object(r.b)("strong",{parentName:"li"},Object(r.b)("em",{parentName:"strong"},"@react-navigation/drawer"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("strong",{parentName:"li"},Object(r.b)("em",{parentName:"strong"},"Avatar")),", ",Object(r.b)("strong",{parentName:"li"},Object(r.b)("em",{parentName:"strong"},"Text"))," and ",Object(r.b)("strong",{parentName:"li"},Object(r.b)("em",{parentName:"strong"},"Switch"))," from ",Object(r.b)("strong",{parentName:"li"},Object(r.b)("em",{parentName:"strong"},"react-native-paper")))),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"DrawerContentScrollView")," component makes the drawer vertically scrollable and provides support for devices with notches, so it's highly recommended to use it even for custom drawers."),Object(r.b)("p",null,Object(r.b)("strong",{parentName:"p"},"Components from React Native Paper")," make a clean, material UI."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport { View, StyleSheet } from 'react-native';\nimport {\n  DrawerItem,\n  DrawerContentScrollView,\n} from '@react-navigation/drawer';\nimport {\n  useTheme,\n  Avatar,\n  Title,\n  Caption,\n  Paragraph,\n  Drawer,\n  Text,\n  TouchableRipple,\n  Switch,\n} from 'react-native-paper';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\n\nexport function DrawerContent(props) {\n  return (\n    <DrawerContentScrollView {...props}>\n      <View\n        style={\n          styles.drawerContent,\n        }\n      >\n        <View style={styles.userInfoSection}>\n          <Avatar.Image\n            source={{\n              uri:\n                'https://pbs.twimg.com/profile_images/952545910990495744/b59hSXUd_400x400.jpg',\n            }}\n            size={50}\n          />\n          <Title style={styles.title}>Dawid Urbaniak</Title>\n          <Caption style={styles.caption}>@trensik</Caption>\n          <View style={styles.row}>\n            <View style={styles.section}>\n              <Paragraph style={[styles.paragraph, styles.caption]}>\n                202\n              </Paragraph>\n              <Caption style={styles.caption}>Following</Caption>\n            </View>\n            <View style={styles.section}>\n              <Paragraph style={[styles.paragraph, styles.caption]}>\n                159\n              </Paragraph>\n              <Caption style={styles.caption}>Followers</Caption>\n            </View>\n          </View>\n        </View>\n        <Drawer.Section style={styles.drawerSection}>\n          <DrawerItem\n            icon={({ color, size }) => (\n              <MaterialCommunityIcons\n                name=\"account-outline\"\n                color={color}\n                size={size}\n              />\n            )}\n            label=\"Profile\"\n            onPress={() => {}}\n          />\n          <DrawerItem\n            icon={({ color, size }) => (\n              <MaterialCommunityIcons name=\"tune\" color={color} size={size} />\n            )}\n            label=\"Preferences\"\n            onPress={() => {}}\n          />\n          <DrawerItem\n            icon={({ color, size }) => (\n              <MaterialCommunityIcons\n                name=\"bookmark-outline\"\n                color={color}\n                size={size}\n              />\n            )}\n            label=\"Bookmarks\"\n            onPress={() => {}}\n          />\n        </Drawer.Section>\n        <Drawer.Section title=\"Preferences\">\n          <TouchableRipple onPress={() => {}}>\n            <View style={styles.preference}>\n              <Text>Dark Theme</Text>\n              <View pointerEvents=\"none\">\n                <Switch value={false} />\n              </View>\n            </View>\n          </TouchableRipple>\n          <TouchableRipple onPress={() => {}}>\n            <View style={styles.preference}>\n              <Text>RTL</Text>\n              <View pointerEvents=\"none\">\n                <Switch value={false} />\n              </View>\n            </View>\n          </TouchableRipple>\n        </Drawer.Section>\n      </View>\n    </DrawerContentScrollView>\n  );\n}\n\nconst styles = StyleSheet.create({\n  drawerContent: {\n    flex: 1,\n  },\n  userInfoSection: {\n    paddingLeft: 20,\n  },\n  title: {\n    marginTop: 20,\n    fontWeight: 'bold',\n  },\n  caption: {\n    fontSize: 14,\n    lineHeight: 14,\n  },\n  row: {\n    marginTop: 20,\n    flexDirection: 'row',\n    alignItems: 'center',\n  },\n  section: {\n    flexDirection: 'row',\n    alignItems: 'center',\n    marginRight: 15,\n  },\n  paragraph: {\n    fontWeight: 'bold',\n    marginRight: 3,\n  },\n  drawerSection: {\n    marginTop: 15,\n  },\n  preference: {\n    flexDirection: 'row',\n    justifyContent: 'space-between',\n    paddingVertical: 12,\n    paddingHorizontal: 16,\n  },\n});\n")),Object(r.b)("p",null,"The final version of a drawer looks like this:"),Object(r.b)("img",{src:"/assets/blog/using-react-navigation-5-with-paper/final-drawer.gif",height:"480"}),Object(r.b)("h2",{id:"stack-navigator--papers-appbar"},"Stack Navigator + Paper's Appbar"),Object(r.b)("p",null,"Stack Navigator provides a way for an app to transition between screens when each new screen is placed on top of a stack. In case of this Twitter clone, we will use it to transition from a screen displaying a feed of tweets to the screen showing details of a tweet."),Object(r.b)("p",null,"React Navigation v5 provides two implementations of a Stack Navigator"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Native Stack"),Object(r.b)("li",{parentName:"ul"},"JS-based Stack")),Object(r.b)("p",null,"The main difference between them is that JS-based stack re-implements animations and gestures while the native stack navigator relies on the platform primitives for animations and gestures."),Object(r.b)("p",null,"In this section, we will integrate React Native Paper ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://callstack.github.io/react-native-paper/appbar-header.html"}),"Appbar")," and JS-based Stack Navigator."),Object(r.b)("p",null,"As a first step, we will create a minimal version of a Stack:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport { createStackNavigator } from '@react-navigation/stack';\n\nimport { Feed } from './feed';\nimport { Details } from './details';\n\nexport const FeedStack = () => {\n  return (\n    <Stack.Navigator initialRouteName=\"Feed\">\n      <Stack.Screen\n        name=\"Feed\"\n        component={Feed}\n        options={{ headerTitle: 'Twitter' }}\n      />\n      <Stack.Screen\n        name=\"Details\"\n        component={Details}\n        options={{ headerTitle: 'Tweet' }}\n      />\n    </Stack.Navigator>\n  );\n};\n")),Object(r.b)("p",null,"By default, the stack navigator is configured to have the familiar iOS and Android header. That doesn't suit our needs, because we want to use Paper's Appbar instead.\nWe can achieve that by passing an ",Object(r.b)("inlineCode",{parentName:"p"},"Appbar.Header")," component as a ",Object(r.b)("inlineCode",{parentName:"p"},"header")," in Stack's ",Object(r.b)("inlineCode",{parentName:"p"},"screenOptions"),". We will also pass a ",Object(r.b)("inlineCode",{parentName:"p"},"headerMode")," prop with a value of ",Object(r.b)("inlineCode",{parentName:"p"},"screen")," to have a nice looking fade in/out animation."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport { TouchableOpacity } from 'react-native';\nimport { createStackNavigator } from '@react-navigation/stack';\nimport { Appbar, Avatar } from 'react-native-paper';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\n\nimport { Feed } from './feed';\nimport { Details } from './details';\n\nconst Header = ({ scene, previous, navigation }) => {\n  const { options } = scene.descriptor;\n  const title =\n    options.headerTitle !== undefined\n      ? options.headerTitle\n      : options.title !== undefined\n      ? options.title\n      : scene.route.name;\n\n  return (\n    <Appbar.Header theme={{ colors: { primary: theme.colors.surface } }}>\n      {previous ? (\n        <Appbar.BackAction\n          onPress={navigation.pop}\n          color={theme.colors.primary}\n        />\n      ) : (\n        <TouchableOpacity\n          onPress={() => {\n            navigation.openDrawer();\n          }}\n        >\n          <Avatar.Image\n            size={40}\n            source={{\n              uri:\n                'https://pbs.twimg.com/profile_images/952545910990495744/b59hSXUd_400x400.jpg',\n            }}\n          />\n        </TouchableOpacity>\n      )}\n      <Appbar.Content\n        title={\n          previous ? title : <MaterialCommunityIcons name=\"twitter\" size={40} />\n        }\n      />\n    </Appbar.Header>\n  );\n};\n\nexport const FeedStack = () => {\n  return (\n    <Stack.Navigator\n      initialRouteName=\"FeedList\"\n      headerMode=\"screen\"\n      screenOptions={{\n        header: ({ scene, previous, navigation }) => (\n          <Header scene={scene} previous={previous} navigation={navigation} />\n        ),\n      }}\n    >\n      <Stack.Screen\n        name=\"Feed\"\n        component={Feed}\n        options={{ headerTitle: 'Twitter' }}\n      />\n      <Stack.Screen\n        name=\"Details\"\n        component={Details}\n        options={{ headerTitle: 'Tweet' }}\n      />\n    </Stack.Navigator>\n  );\n};\n")),Object(r.b)("p",null,"The Function that we pass to ",Object(r.b)("inlineCode",{parentName:"p"},"header")," prop has access to 3 properties:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"scene"),Object(r.b)("li",{parentName:"ul"},"previous"),Object(r.b)("li",{parentName:"ul"},"navigation")),Object(r.b)("p",null,"Thanks to the ",Object(r.b)("strong",{parentName:"p"},"scene")," property we can access the title of topmost screen on the stack and display it in the header.\n",Object(r.b)("strong",{parentName:"p"},"Previous")," property tells us if there are any other screens lower on the Stack."),Object(r.b)("br",null),"Finally, **navigation** property allows navigating to different screens e.g. opening a Drawer.",Object(r.b)("p",null,"The thing that we haven't covered yet and it is very important is how to actually navigate between Stack Navigator screens.\nIn case of Tab or Drawer Navigator, we get it out of the box. We can swipe to open/close the Drawer or press a tab to change the scene. In Stack, we have to implement it by ourselves."),Object(r.b)("p",null,"React Navigation gives us many different ways to navigate, but we will mostly focus on ",Object(r.b)("inlineCode",{parentName:"p"},"push")," and ",Object(r.b)("inlineCode",{parentName:"p"},"pop"),". You can access these two methods in ",Object(r.b)("strong",{parentName:"p"},"navigation")," prop."),Object(r.b)("p",null,"As the name suggests ",Object(r.b)("inlineCode",{parentName:"p"},"push")," method pushes the new screen on the stack and ",Object(r.b)("inlineCode",{parentName:"p"},"pop")," removes current screen from the stack."),Object(r.b)("p",null,"As you can see on a snippet above, we invoke a ",Object(r.b)("inlineCode",{parentName:"p"},"navigation.pop")," function whenever user presses the back button in header. This means user will be allowed to come back from ",Object(r.b)("strong",{parentName:"p"},"Details")," to the ",Object(r.b)("strong",{parentName:"p"},"Feed")," screen."),Object(r.b)("p",null,"We still need to implement an option to go from ",Object(r.b)("strong",{parentName:"p"},"Feed")," to the ",Object(r.b)("strong",{parentName:"p"},"Details"),". We can do it by invoking ",Object(r.b)("inlineCode",{parentName:"p"},"navigation.push('Details')")," whenever user presses a Tweet."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"function onTweetPress() {\n  navigation.push('Details');\n}\n")),Object(r.b)("p",null,"The implementation of ",Object(r.b)("inlineCode",{parentName:"p"},"Feed")," and ",Object(r.b)("inlineCode",{parentName:"p"},"Details")," components is quite big and complex, that's why I am not gonna post it here. Please make sure to check it out on ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/Trancever/twitterClone"}),"github repo")),Object(r.b)("p",null,"We have covered only the basics of navigating between screens. If you want to learn more details check the official ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/navigating"}),"documentation"),"."),Object(r.b)("p",null,"Now, let's see what does the app looks like with Stack Navigator and Paper's Appbar."),Object(r.b)("img",{src:"/assets/blog/using-react-navigation-5-with-paper/stack.gif",height:"480"}),Object(r.b)("p",null,"We still miss the last piece of our navigation flow - ",Object(r.b)("strong",{parentName:"p"},"Tab Navigator"),". Let's move to the next section where we will take care of it."),Object(r.b)("h2",{id:"bottom-navigation"},"Bottom Navigation"),Object(r.b)("p",null,"In this section, we will implement a Tab Navigator with 3 tabs and we will make sure this component is now a one of Stack's screen."),Object(r.b)("p",null,"We will use a ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://callstack.github.io/react-native-paper/bottom-navigation.html"}),"Bottom Navigation")," component from React Native Paper that is exposed via ",Object(r.b)("strong",{parentName:"p"},"@react-navigation/material-bottom-tabs")," package."),Object(r.b)("p",null,"Let's import the ",Object(r.b)("strong",{parentName:"p"},"createMaterialBottomTabNavigator")," function first."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import { createMaterialBottomTabNavigator } from '@react-navigation/material-bottom-tabs';\n")),Object(r.b)("p",null,"Then we can get a reference to the Tab.Navigator and Tab.Screen components."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"const Tab = createMaterialBottomTabNavigator();\n")),Object(r.b)("p",null,"Now, we are ready to build the actual Bottom Navigation. We will render a ",Object(r.b)("inlineCode",{parentName:"p"},"Tab.navigator")," and 3 ",Object(r.b)("inlineCode",{parentName:"p"},"Tab.Screen")," components as children. Each ",Object(r.b)("inlineCode",{parentName:"p"},"Tab.Screen")," representing a tab."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport { createMaterialBottomTabNavigator } from '@react-navigation/material-bottom-tabs';\n\nimport { Feed } from './feed';\nimport { Messages } from './messages';\nimport { Notifications } from './notifications';\n\nconst Tab = createMaterialBottomTabNavigator();\n\nexport const BottomTabs = () => {\n  return (\n    <Tab.Navigator\n      initialRouteName=\"Feed\"\n      shifting={true}\n      sceneAnimationEnabled={false}\n    >\n      <Tab.Screen\n        name=\"Feed\"\n        component={Feed}\n        options={{\n          tabBarIcon: 'home-account',\n        }}\n      />\n      <Tab.Screen\n        name=\"Notifications\"\n        component={Notifications}\n        options={{\n          tabBarIcon: 'bell-outline',\n        }}\n      />\n      <Tab.Screen\n        name=\"Messages\"\n        component={Messages}\n        options={{\n          tabBarIcon: 'message-text-outline',\n        }}\n      />\n    </Tab.Navigator>\n  );\n};\n")),Object(r.b)("p",null,"When we check the screen of the phone now, we will see a nice looking, material bottom navigation. What's more, Stack Navigator integrates nicely with Tab.Navigator and we can still navigate to the tweet ",Object(r.b)("inlineCode",{parentName:"p"},"Details")," screen."),Object(r.b)("br",null),Object(r.b)("img",{src:"/assets/blog/using-react-navigation-5-with-paper/bottom-navigation.gif",height:"480"}),Object(r.b)("h2",{id:"fab-and-portal"},"FAB and Portal"),Object(r.b)("p",null,"As it is stated in ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://material.io/components/buttons-floating-action-button/"}),"Material Design Guidelines"),", the purpose of the FAB button is to give easy access to the main action of the application. Of course, the official Twitter app follows this pattern. Based on the type of screen, it allows creating new tweets or sending direct messages via FAB. It also smoothly animates the icon of the FAB when the user changes the tab and hides the FAB completely on specific screens."),Object(r.b)("p",null,"In this section, we are going to implement the very same behaviour in our app. We are going to use a ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://callstack.github.io/react-native-paper/fab.html"}),"FAB")," and ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://callstack.github.io/react-native-paper/portal.html"}),"Portal")," components from React Native Paper."),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"Portal")," allows rendering a component at a different place in the parent tree. It means you can use it to render content that should appear above other elements, similar to Modal."),Object(r.b)("p",null,"As an initial step, we will render a FAB on all tabs and then we will add additional functionalities."),Object(r.b)("p",null,"Let's render a ",Object(r.b)("inlineCode",{parentName:"p"},"FAB")," and ",Object(r.b)("inlineCode",{parentName:"p"},"Portal")," in the same component where we render Tabs:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport { createMaterialBottomTabNavigator } from '@react-navigation/material-bottom-tabs';\nimport { useTheme, Portal, FAB } from 'react-native-paper';\n\nimport { Feed } from './feed';\nimport { Message } from './message';\nimport { Notifications } from './notifications';\n\nconst Tab = createMaterialBottomTabNavigator();\n\nexport const BottomTabs = () => {\n  return (\n    <React.Fragment>\n      <Tab.Navigator\n        initialRouteName=\"Feed\"\n        backBehavior=\"initialRoute\"\n        shifting={true}\n        sceneAnimationEnabled={false}\n      >\n        <Tab.Screen\n          name=\"Feed\"\n          component={Feed}\n          options={{\n            tabBarIcon: 'home-account',\n          }}\n        />\n        <Tab.Screen\n          name=\"Notifications\"\n          component={Notifications}\n          options={{\n            tabBarIcon: 'bell-outline',\n          }}\n        />\n        <Tab.Screen\n          name=\"Messages\"\n          component={Message}\n          options={{\n            tabBarIcon: 'message-text-outline',\n          }}\n        />\n      </Tab.Navigator>\n      <Portal>\n        <FAB\n          icon=\"feather\"\n          style={{\n            position: 'absolute',\n            bottom: 100,\n            right: 16,\n          }}\n        />\n      </Portal>\n    </React.Fragment>\n  );\n};\n")),Object(r.b)("p",null,"With just a few lines of JSX we have a nice looking FAB displayed on all tabs. Let's implement hiding it whenever the user goes to the tweet details screen."),Object(r.b)("p",null,"Our current navigation structure should be:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"StackNavigator that has two screens"),Object(r.b)("li",{parentName:"ul"},"The First screen of StackNavigator renders a TabNavigator with 3 tabs"),Object(r.b)("li",{parentName:"ul"},"The Second screen of StckNavigator renders a Tweet details")),Object(r.b)("p",null,"This means a component that renders TabNavigator is a Stack's screen. Thanks to that, we can use ",Object(r.b)("inlineCode",{parentName:"p"},"useIsFocused")," hook provided by ",Object(r.b)("inlineCode",{parentName:"p"},"@react-navigation/native")," and conditionally hide ",Object(r.b)("inlineCode",{parentName:"p"},"FAB"),"."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport { createMaterialBottomTabNavigator } from '@react-navigation/material-bottom-tabs';\nimport { useTheme, Portal, FAB } from 'react-native-paper';\nimport { useIsFocused } from '@react-navigation/native';\n\nimport { Feed } from './feed';\nimport { Message } from './message';\nimport { Notifications } from './notifications';\n\nconst Tab = createMaterialBottomTabNavigator();\n\nexport const BottomTabs = () => {\n  const isFocused = useIsFocused();\n\n  return (\n    <React.Fragment>\n      <Tab.Navigator\n        initialRouteName=\"Feed\"\n        backBehavior=\"initialRoute\"\n        shifting={true}\n      >\n        <Tab.Screen\n          name=\"Feed\"\n          component={Feed}\n          options={{\n            tabBarIcon: 'home-account',\n          }}\n        />\n        <Tab.Screen\n          name=\"Notifications\"\n          component={Notifications}\n          options={{\n            tabBarIcon: 'bell-outline',\n          }}\n        />\n        <Tab.Screen\n          name=\"Messages\"\n          component={Message}\n          options={{\n            tabBarIcon: 'message-text-outline',\n          }}\n        />\n      </Tab.Navigator>\n      <Portal>\n        <FAB\n          visible={isFocused} // show FAB only when this screen is focused\n          icon=\"feather\"\n          style={{\n            position: 'absolute',\n            bottom: safeArea.bottom + 65,\n            right: 16,\n          }}\n        />\n      </Portal>\n    </React.Fragment>\n  );\n};\n")),Object(r.b)("p",null,"In the last step we will add ability to show different icon depending on the active tab."),Object(r.b)("p",null,"We will take an advantage of our ",Object(r.b)("inlineCode",{parentName:"p"},"BottomTabs")," component being one of a Stack's screen. It means it has an access to the ",Object(r.b)("inlineCode",{parentName:"p"},"route")," object that is passed to each screen as a prop. This object contains an information about current screen which means we can access it and conditionally render proper icon. This is not a very common pattern and it can be confusing at first, so make sure to read the whole ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/screen-options-resolution"}),"guide")," on how to use it and what can be achieved by using it."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport color from 'color';\nimport { createMaterialBottomTabNavigator } from '@react-navigation/material-bottom-tabs';\nimport { Portal, FAB } from 'react-native-paper';\nimport { useIsFocused } from '@react-navigation/native';\n\nimport { Feed } from './feed';\nimport { Message } from './message';\nimport { Notifications } from './notifications';\n\nconst Tab = createMaterialBottomTabNavigator();\n\nexport const BottomTabs = props => {\n  // Get a name of current screen\n  const routeName = getFocusedRouteNameFromRoute(route) ?? 'Feed';\n  const isFocused = useIsFocused();\n\n  let icon = 'feather';\n\n  switch (routeName) {\n    case 'Messages':\n      icon = 'email-plus-outline';\n      break;\n    default:\n      icon = 'feather';\n      break;\n  }\n\n  return (\n    <React.Fragment>\n      <Tab.Navigator initialRouteName=\"Feed\" shifting={true}>\n        <Tab.Screen\n          name=\"Feed\"\n          component={Feed}\n          options={{\n            tabBarIcon: 'home-account',\n            tabBarColor,\n          }}\n        />\n        <Tab.Screen\n          name=\"Notifications\"\n          component={Notifications}\n          options={{\n            tabBarIcon: 'bell-outline',\n            tabBarColor,\n          }}\n        />\n        <Tab.Screen\n          name=\"Messages\"\n          component={Message}\n          options={{\n            tabBarIcon: 'message-text-outline',\n            tabBarColor,\n          }}\n        />\n      </Tab.Navigator>\n      <Portal>\n        <FAB\n          visible={isFocused}\n          icon={icon}\n          style={{\n            position: 'absolute',\n            bottom: 100,\n            right: 16,\n          }}\n          color=\"white\"\n        />\n      </Portal>\n    </React.Fragment>\n  );\n};\n")),Object(r.b)("img",{src:"/assets/blog/using-react-navigation-5-with-paper/fab.gif",height:"480"}),Object(r.b)("p",null,"As you can see on the gif, the FAB button works in the same way as in a Twitter app.\nWhat's more, it even animates icon change properly even though we haven't implemented it. That's the behavior we get from React Native Paper's FAB out of the box."),Object(r.b)("h2",{id:"theming"},"Theming"),Object(r.b)("p",null,"Nowadays, supporting the Light/Dark theme is no longer a fancy way to stand out from other apps, but it has become a standard. Happily, both React Navigation v5 and React Native Paper supports theming and in this section I'll guide you through setting it up."),Object(r.b)("h4",{id:"react-navigation"},"React Navigation"),Object(r.b)("p",null,"React Navigation exports two themes:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"DefaultTheme"),Object(r.b)("li",{parentName:"ul"},"DarkTheme")),Object(r.b)("p",null,"We can import them from ",Object(r.b)("inlineCode",{parentName:"p"},"@react-navigation/native")," package and pass to ",Object(r.b)("inlineCode",{parentName:"p"},"NavigationContainer")," to apply the theme:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport { NavigationContainer, DarkTheme } from '@react-navigation/native';\n\nexport default function App() {\n  return (\n    <NavigationContainer theme={DarkTheme}>{/* content */}</NavigationContainer>\n  );\n}\n")),Object(r.b)("h4",{id:"react-native-paper"},"React Native Paper"),Object(r.b)("p",null,"React Native Paper similarly to React Navigation also exports two themes:"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"DefaultTheme"),Object(r.b)("li",{parentName:"ul"},"DarkTheme")),Object(r.b)("p",null,"Once we import a theme we can pass it to the Paper's ",Object(r.b)("inlineCode",{parentName:"p"},"Provider")," component:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import * as React from 'react';\nimport { NavigationContainer, DarkTheme } from '@react-navigation/native';\nimport {\n  DarkTheme as PaperDarkTheme,\n  Provider as PaperProvider,\n} from 'react-native-paper';\n\nexport default function Main() {\n  return (\n    <PaperProvider theme={PaperDarkTheme}>\n      <NavigationContainer theme={DarkTheme}>\n        {/* content */}\n      </NavigationContainer>\n    </PaperProvider>\n  );\n}\n")),Object(r.b)("h4",{id:"combining-themes"},"Combining themes"),Object(r.b)("p",null,"Since both React Navigation and React Native Paper follows the same pattern for theming and structure of the theme object is very similar, we can combine them into one object:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import * as React from 'react';\nimport {\n  NavigationContainer,\n  DarkTheme as NavigationDarkTheme,\n} from '@react-navigation/native';\nimport {\n  DarkTheme as PaperDarkTheme,\n  Provider as PaperProvider,\n} from 'react-native-paper';\n\nconst CombinedDarkTheme = {\n  ...PaperDarkTheme,\n  ...NavigationDarkTheme,\n  colors: { ...PaperDarkTheme.colors, ...NavigationDarkTheme.colors },\n};\n\nexport default function Main() {\n  return (\n    <PaperProvider theme={CombinedDarkTheme}>\n      <NavigationContainer theme={CombinedDarkTheme}>\n        {/* content */}\n      </NavigationContainer>\n    </PaperProvider>\n  );\n}\n")),Object(r.b)("p",null,"If code for themes merging looks complex, you can use a ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://www.npmjs.com/package/deepmerge"}),"deepmerge")," package. It will simplify the implementation significantly."),Object(r.b)("h4",{id:"custom-themes"},"Custom themes"),Object(r.b)("p",null,"Of course, the built-in themes are not the only themes we can apply. Both libraries allow full customization and you can learn about it in the official documentation (",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"/docs/themes"}),"React Navigation"),", ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://callstack.github.io/react-native-paper/theming.html"}),"React Native Paper"),")"),Object(r.b)("p",null,"In the last step, I want to show you how to change the theme dynamically. We will implement a switch in a drawer that will allow users choosing light or dark theme."),Object(r.b)("p",null,"We need to store information about the currently selected theme somewhere. The local state of the root component sounds reasonable. Also, we will conditionally pass different themes based on the state."),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import * as React from 'react';\nimport {\n  NavigationContainer,\n  DefaultTheme as NavigationDefaultTheme,\n  DarkTheme as NavigationDarkTheme,\n} from '@react-navigation/native';\nimport {\n  DarkTheme as PaperDarkTheme,\n  DefaultTheme as PaperDefaultTheme,\n  Provider as PaperProvider,\n} from 'react-native-paper';\n\nconst CombinedDefaultTheme = {\n  ...PaperDefaultTheme,\n  ...NavigationDefaultTheme,\n};\nconst CombinedDarkTheme = { ...PaperDarkTheme, ...NavigationDarkTheme };\n\nexport default function Main() {\n  const [isDarkTheme, setIsDarkTheme] = React.useState(false);\n\n  const theme = isDarkTheme ? CombinedDarkTheme : CombinedDefaultTheme; // Use Light/Dark theme based on a state\n\n  function toggleTheme() {\n    // We will pass this function to Drawer and invoke it on theme switch press\n    setIsDarkTheme(isDark => !isDark);\n  }\n\n  return (\n    <PaperProvider theme={theme}>\n      <NavigationContainer theme={theme}>{/* content */}</NavigationContainer>\n    </PaperProvider>\n  );\n}\n")),Object(r.b)("p",null,"As you remember, we already render a Switch in a Drawer, but we haven't implemented any logic when it is pressed. Let's take care of it now:"),Object(r.b)("pre",null,Object(r.b)("code",Object(a.a)({parentName:"pre"},{className:"language-jsx"}),"import React from 'react';\nimport { View } from 'react-native';\nimport { DrawerContentScrollView } from '@react-navigation/drawer';\nimport {\n  useTheme,\n  Avatar,\n  Drawer,\n  Text,\n  TouchableRipple,\n  Switch,\n} from 'react-native-paper';\n\nexport function DrawerContent(props) {\n  const paperTheme = useTheme();\n\n  return (\n    <DrawerContentScrollView {...props}>\n      /* {...other - content} */\n      <Drawer.Section title=\"Preferences\">\n        <TouchableRipple onPress={props.toggleTheme}>\n          <View style={styles.preference}>\n            <Text>Dark Theme</Text>\n            <View pointerEvents=\"none\">\n              <Switch value={theme.dark} />\n            </View>\n          </View>\n        </TouchableRipple>\n      </Drawer.Section>\n    </DrawerContentScrollView>\n  );\n}\n")),Object(r.b)("p",null,"Firstly, we get a current theme using ",Object(r.b)("inlineCode",{parentName:"p"},"useTheme")," hook from Paper. This means we can check ",Object(r.b)("inlineCode",{parentName:"p"},"dark")," property on it and pass the correct value to ",Object(r.b)("inlineCode",{parentName:"p"},"Switch"),"."),Object(r.b)("br",null),"Secondly, we pass a `toggleTheme` function to `TouchableRipple` to toggle theme whenever user presses a Switch.",Object(r.b)("p",null,"You should be able to toggle a switch now and both ",Object(r.b)("inlineCode",{parentName:"p"},"Provider")," from Paper and ",Object(r.b)("inlineCode",{parentName:"p"},"NativeNavigationContainer")," from React Navigation will automatically apply correct colors to the components."),Object(r.b)("br",null),Object(r.b)("img",{src:"/assets/blog/using-react-navigation-5-with-paper/theming.gif",height:"480"}),Object(r.b)("h2",{id:"summary"},"Summary"),Object(r.b)("p",null,"We all know that UI Component library like Paper can speed up the development, but integrating it with a navigation can be sometimes not very straighforward. I hope I showed you the most important aspects of this process in this guide. After reading this article, using Paper's BottomNavigation, Appbar, Drawer, FAB or Portal alongside with React Navigation shouldn't be a problem for you."),Object(r.b)("p",null,"Do you have any questions? Tweet to me ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://twitter.com/trensik"}),"@trensik"),"."),Object(r.b)("p",null,"At the end I want to thank ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://twitter.com/satya164"}),"@satya164")," and the whole ",Object(r.b)("a",Object(a.a)({parentName:"p"},{href:"https://callstack.com/"}),"Callstack")," team for their help with the article."))}l.isMDXComponent=!0},427:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return u}));var a=n(0),o=n.n(a);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=o.a.createContext({}),l=function(e){var t=o.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},b=function(e){var t=l(e.components);return o.a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},h=o.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,r=e.originalType,i=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),b=l(n),h=a,u=b["".concat(i,".").concat(h)]||b[h]||m[h]||r;return n?o.a.createElement(u,c(c({ref:t},p),{},{components:n})):o.a.createElement(u,c({ref:t},p))}));function u(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var r=n.length,i=new Array(r);i[0]=h;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var p=2;p<r;p++)i[p]=n[p];return o.a.createElement.apply(null,i)}return o.a.createElement.apply(null,n)}h.displayName="MDXCreateElement"}}]);